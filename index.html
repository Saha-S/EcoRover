<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="light-content">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#FFFFFF">
    <meta name="apple-mobile-web-app-title" content="EcoRover">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='%2310B981'/><text x='50' y='65' text-anchor='middle' font-size='40' fill='white'>üåç</text></svg>">
    <title>EcoRover - Navigate Safely, Journey Sustainably</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script defer src="https://unpkg.com/alpinejs@3.14.1/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
        }
        
        /* ====== LIGHT THEME MOBILE APP ====== */
        
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            overflow-x: hidden;
            background: #F8FAFC;
            color: #1E293B;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* iOS Safe Area Support */
        body {
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }
        
        /* Light Theme Color System */
        .success-green { color: #10B981; }
        .bg-success-green { background-color: #10B981; }
        .primary-blue { color: #3B82F6; }
        .bg-primary-blue { background-color: #3B82F6; }
        .warning-orange { color: #F59E0B; }
        .bg-warning-orange { background-color: #F59E0B; }
        .danger-red { color: #EF4444; }
        .bg-danger-red { background-color: #EF4444; }
        
        /* Light Theme Shadow Effects */
        .shadow-success { 
            box-shadow: 0 4px 14px rgba(16, 185, 129, 0.15),
                        0 1px 3px rgba(16, 185, 129, 0.08);
        }
        .shadow-primary { 
            box-shadow: 0 4px 14px rgba(59, 130, 246, 0.15),
                        0 1px 3px rgba(59, 130, 246, 0.08);
        }
        .shadow-warning { 
            box-shadow: 0 4px 14px rgba(245, 158, 11, 0.15),
                        0 1px 3px rgba(245, 158, 11, 0.08);
        }
        .shadow-danger { 
            box-shadow: 0 4px 14px rgba(239, 68, 68, 0.15),
                        0 1px 3px rgba(239, 68, 68, 0.08);
        }
        
        /* Elevated Cards */
        .card-elevated {
            background: white;
            border-radius: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-elevated:active {
            transform: scale(0.98);
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.12);
        }
        
        /* Pulse Animations */
        .pulse-red { animation: pulse-red 1.5s infinite; }
        @keyframes pulse-red {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(255, 0, 0, 0.4);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 0 40px rgba(255, 0, 0, 0.8);
                transform: scale(1.05);
            }
        }
        
        .pulse-green { animation: pulse-green 2s infinite; }
        @keyframes pulse-green {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
            }
            50% { 
                box-shadow: 0 0 40px rgba(0, 255, 0, 0.6);
            }
        }
        
        /* 3D Satellite Orbit Animation */
        .satellite-orbit {
            animation: orbit-3d 12s linear infinite;
            transform-style: preserve-3d;
        }
        @keyframes orbit-3d {
            0% { 
                transform: rotateY(0deg) translateX(60px) rotateY(0deg);
                opacity: 1;
            }
            50% { 
                transform: rotateY(180deg) translateX(60px) rotateY(-180deg);
                opacity: 0.6;
            }
            100% { 
                transform: rotateY(360deg) translateX(60px) rotateY(-360deg);
                opacity: 1;
            }
        }
        
        /* Earth Rotation */
        .earth-rotate {
            animation: rotate-earth 20s linear infinite;
        }
        @keyframes rotate-earth {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Light Emission Effect */
        .light-pulse {
            animation: light-pulse 2s ease-in-out infinite;
        }
        @keyframes light-pulse {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.2); }
        }
        
        /* Floating Button */
        .floating-btn {
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-12px); }
        }
        
        /* Route Line Animation */
        .route-line {
            stroke-width: 4;
            stroke-dasharray: 10, 5;
            animation: dash 2s linear infinite;
        }
        @keyframes dash {
            to { stroke-dashoffset: -15; }
        }
        
        /* Card Swipe Transition with 3D Depth */
        .card-swipe-enter {
            animation: swipe-in 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        @keyframes swipe-in {
            from {
                opacity: 0;
                transform: translateX(100%) rotateY(-15deg);
            }
            to {
                opacity: 1;
                transform: translateX(0) rotateY(0deg);
            }
        }
        
        .card-swipe-exit {
            animation: swipe-out 0.4s cubic-bezier(0.55, 0.085, 0.68, 0.53);
        }
        @keyframes swipe-out {
            from {
                opacity: 1;
                transform: translateX(0) rotateY(0deg);
            }
            to {
                opacity: 0;
                transform: translateX(-100%) rotateY(15deg);
            }
        }
        
        /* Parallax Effect */
        .parallax-layer {
            transition: transform 0.3s ease-out;
        }
        
        /* Shake Animation for Critical Alerts */
        .shake {
            animation: shake 0.5s infinite;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        /* Haptic Feedback Simulation */
        .haptic-pulse {
            animation: haptic 0.1s ease-in-out;
        }
        @keyframes haptic {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(0.95); }
        }
        
        /* Data Stream Effect */
        .data-stream {
            animation: data-flow 2s ease-in-out infinite;
        }
        @keyframes data-flow {
            0% { 
                opacity: 0;
                transform: translateY(-20px);
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateY(20px);
            }
        }
        
        /* Holographic Effect */
        .holographic {
            background: linear-gradient(45deg, 
                transparent 30%, 
                rgba(0, 255, 0, 0.1) 50%, 
                transparent 70%);
            background-size: 200% 200%;
            animation: holographic-shift 3s ease infinite;
        }
        @keyframes holographic-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* Neon Halo Effect */
        .neon-halo {
            position: relative;
        }
        .neon-halo::before {
            content: '';
            position: absolute;
            inset: -4px;
            border-radius: inherit;
            background: linear-gradient(45deg, #00FF00, #007FFF, #FF8C00, #00FF00);
            background-size: 300% 300%;
            animation: neon-rotate 4s linear infinite;
            opacity: 0.5;
            filter: blur(10px);
            z-index: -1;
        }
        @keyframes neon-rotate {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }
        
        /* Smooth Fade In */
        .fade-in {
            animation: fadeIn 0.6s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1F2937;
        }
        ::-webkit-scrollbar-thumb {
            background: #00FF00;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #00CC00;
        }
        
        /* Toggle Switch Animation */
        .toggle-switch {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Progress Bar Gradient */
        .progress-gradient {
            background: linear-gradient(90deg, #00FF00 0%, #007FFF 50%, #FF8C00 100%);
        }
        
        /* Card Hover Effect */
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card-hover:hover {
            transform: translateY(-8px) scale(1.02);
        }
        
        /* Modal Backdrop Blur */
        .modal-backdrop {
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }
        
        /* Badge Shine Effect */
        .badge-shine {
            position: relative;
            overflow: hidden;
        }
        .badge-shine::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                transparent 30%,
                rgba(255, 255, 255, 0.3) 50%,
                transparent 70%
            );
            animation: shine 3s infinite;
        }
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%); }
            100% { transform: translateX(100%) translateY(100%); }
        }
        
        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .mobile-fullscreen {
                min-height: 100vh;
                min-height: -webkit-fill-available;
            }
        }
        
        /* Touch Feedback */
        .touch-feedback:active {
            transform: scale(0.95);
            opacity: 0.8;
        }
        
        /* Enhanced 3D Card Effects */
        .card-3d {
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }
        
        .card-3d:hover {
            transform: translateY(-15px) rotateX(5deg) rotateY(-5deg) scale(1.05);
            box-shadow: 0 30px 80px rgba(0, 255, 0, 0.4);
        }
        
        /* Character jump animation */
        @keyframes characterJump {
            0% { 
                transform: translateY(100vh) scale(0.3) rotate(-15deg);
                opacity: 0;
            }
            40% { 
                transform: translateY(-80px) scale(1.2) rotate(5deg);
                opacity: 1;
            }
            60% { 
                transform: translateY(30px) scale(0.9) rotate(-3deg);
            }
            80% { 
                transform: translateY(-15px) scale(1.05) rotate(2deg);
            }
            100% { 
                transform: translateY(0) scale(1) rotate(0deg);
            }
        }
        
        .character-jump {
            animation: characterJump 1.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        /* Floating animation */
        @keyframes floatCharacter {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-15px) rotate(-2deg); }
            66% { transform: translateY(-8px) rotate(2deg); }
        }
        
        .floating-character {
            animation: floatCharacter 4s ease-in-out infinite;
        }
        
        /* Shimmer effect */
        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }
        
        .shimmer {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            background-size: 1000px 100%;
            animation: shimmer 2.5s infinite;
        }
        
        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }
        
        /* Neon glow pulse */
        @keyframes neonPulse {
            0%, 100% { 
                box-shadow: 0 0 25px rgba(0, 255, 0, 0.6),
                            0 0 50px rgba(0, 255, 0, 0.4),
                            inset 0 0 25px rgba(0, 255, 0, 0.2);
            }
            50% { 
                box-shadow: 0 0 40px rgba(0, 255, 0, 0.9),
                            0 0 80px rgba(0, 255, 0, 0.6),
                            inset 0 0 40px rgba(0, 255, 0, 0.4);
            }
        }
        
        .neon-pulse {
            animation: neonPulse 2s ease-in-out infinite;
        }
        
        /* Pop in animation */
        @keyframes popIn {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .pop-in {
            animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        /* Slide in with bounce */
        @keyframes slideInBounce {
            0% { transform: translateX(-100%); opacity: 0; }
            60% { transform: translateX(20px); opacity: 1; }
            80% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }
        
        .slide-in-bounce {
            animation: slideInBounce 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        /* Light mode overrides: when body has .light-mode, map common dark utility classes
           to light-friendly colors. We use attribute selectors to catch Tailwind's
           generated classes (including slash modifiers like bg-black/90).
           These are intentionally specific and use !important to override inline
           utility classes without refactoring the HTML. */
        body.light-mode [class*="bg-black"] { background-color: #ffffff !important; color: #0f172a !important; }
        body.light-mode [class*="bg-gray-900"] { background-color: #f8fafc !important; color: #0f172a !important; }
        body.light-mode [class*="bg-gray-800"] { background-color: #f1f5f9 !important; color: #0f172a !important; }
        body.light-mode [class*="bg-gray-700"] { background-color: #eef2f7 !important; color: #0f172a !important; }

        body.light-mode [class*="text-white"] { color: #0f172a !important; }
        body.light-mode .text-gray-400, body.light-mode [class*="text-gray-4"] { color: #64748b !important; }
        body.light-mode .text-gray-300, body.light-mode [class*="text-gray-3"] { color: #94a3b8 !important; }
        body.light-mode .text-gray-500, body.light-mode [class*="text-gray-5"] { color: #475569 !important; }

        body.light-mode [class*="border-gray-700"], body.light-mode [class*="border-gray-800"] { border-color: #e2e8f0 !important; }

        /* Dark translucent overlays -> lighter translucent variants */
        body.light-mode [class*="bg-black/"] { background-color: rgba(255,255,255,0.92) !important; }
        body.light-mode [class*="bg-gray-900/"] { background-color: rgba(248,250,252,0.95) !important; }

        /* Scrollbar adjustments for light background */
        body.light-mode ::-webkit-scrollbar-track { background: #f1f5f9; }
        body.light-mode ::-webkit-scrollbar-thumb { background: #94a3b8; }
    </style>
</head>
<body class="light-mode bg-gradient-to-br from-blue-50 via-green-50 to-white min-h-screen text-gray-900" x-data="ecoRoverApp()">
    
    <!-- S1. Splash Screen - Light Theme -->
    <div x-show="currentScreen === 'splash'" class="fixed inset-0 bg-gradient-to-br from-blue-500 via-green-500 to-blue-600 flex flex-col items-center justify-center z-50 fade-in">
        <div class="relative mb-12">
            <!-- Central Earth -->
            <div class="w-32 h-32 bg-gradient-to-br from-green-600 via-blue-700 to-green-800 rounded-full flex items-center justify-center mx-auto earth-rotate" style="box-shadow: 0 0 60px rgba(0, 255, 0, 0.3), inset 0 0 40px rgba(0, 127, 255, 0.2);">
                <i class="fas fa-globe-americas text-white text-4xl"></i>
            </div>
            
            <!-- Orbiting Sentinel Satellite -->
            <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
                <div class="w-12 h-12 bg-gradient-to-r from-green-400 to-green-600 rounded-lg flex items-center justify-center satellite-orbit">
                    <i class="fas fa-satellite text-white text-lg"></i>
                </div>
            </div>
            
            <!-- Orbiting Galileo Satellite -->
            <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
                <div class="w-10 h-10 bg-gradient-to-r from-blue-400 to-blue-600 rounded-lg flex items-center justify-center satellite-orbit" style="animation-delay: -4s; animation-duration: 10s;">
                    <i class="fas fa-satellite-dish text-white"></i>
                </div>
            </div>
            
            <!-- Light Emission Rings -->
            <div class="absolute inset-0 w-40 h-40 -m-4 border-2 border-green-400 rounded-full opacity-20 light-pulse"></div>
            <div class="absolute inset-0 w-48 h-48 -m-8 border border-blue-400 rounded-full opacity-10 light-pulse" style="animation-delay: 1s;"></div>
        </div>
        
        <h1 class="text-5xl md:text-6xl font-black text-center mb-6 bg-gradient-to-r from-green-400 via-blue-500 to-green-400 bg-clip-text text-transparent animate-pulse">
            EcoRover
        </h1>
        <p class="text-xl md:text-2xl text-center text-gray-300 mb-3 fade-in">Navigate Safely. Journey Sustainably.</p>
        <p class="text-lg md:text-xl text-center neon-green font-bold pulse-green">‚ú® Power from Space ‚ú®</p>
        
        <div class="mt-12 w-80 h-2 bg-gray-800 rounded-full overflow-hidden">
            <div class="h-full progress-gradient animate-pulse" style="width: 100%;"></div>
        </div>
        <p class="text-sm text-gray-500 mt-3">Initializing EU Space Systems...</p>
    </div>

    <!-- S2. Sign Up/Log In -->
    <div x-show="currentScreen === 'auth'" class="min-h-screen bg-black p-4 md:p-6">
        <div class="max-w-md mx-auto pt-16">
            <div class="text-center mb-8">
                <div class="w-16 h-16 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center mb-4 mx-auto">
                    <i class="fas fa-satellite text-white text-xl"></i>
                </div>
                <h2 class="text-2xl md:text-3xl font-bold mb-2">Welcome to EcoRover</h2>
                <p class="text-gray-400">Your space-powered adventure companion</p>
            </div>
            
            <div class="bg-gray-900 rounded-2xl p-6 mb-6 border border-blue-500 glow-blue">
                <div class="flex items-center mb-4">
                    <i class="fas fa-satellite-dish cobalt-blue mr-3"></i>
                    <p class="text-sm text-blue-300">To enable high-accuracy and critical safety features, please activate location services (Galileo GNSS).</p>
                </div>
            </div>

            <form class="space-y-4">
                <div>
                    <input type="email" placeholder="Email address" class="w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-white placeholder-gray-400 focus:border-green-400 focus:outline-none">
                </div>
                <div>
                    <input type="password" placeholder="Password" class="w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-white placeholder-gray-400 focus:border-green-400 focus:outline-none">
                </div>
                <button @click="currentScreen = 'value-prop'" type="button" class="w-full bg-gradient-to-r from-green-400 to-blue-500 text-black font-bold py-4 rounded-xl hover:opacity-90 transition-all shadow-lg touch-feedback">
                    Sign In
                </button>
                <p class="text-center text-gray-400 text-sm">Don't have an account? <span class="neon-green cursor-pointer">Sign up</span></p>
            </form>
        </div>
    </div>

    <!-- S3. Value Proposition -->
    <div x-show="currentScreen === 'value-prop'" class="min-h-screen bg-black p-4 md:p-6">
        <div class="max-w-4xl mx-auto pt-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Powered by EU Space Technology</h2>
                <p class="text-gray-400 text-lg">Experience the future of outdoor exploration</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                <div class="bg-gray-900 rounded-2xl p-8 border-2 border-red-500 glow-orange card-hover cursor-pointer parallax-layer touch-feedback"
                     @mouseenter="$el.style.transform = 'translateY(-12px) scale(1.03)'"
                     @mouseleave="$el.style.transform = 'translateY(0) scale(1)'">
                    <div class="w-20 h-20 bg-gradient-to-br from-red-500 to-orange-500 rounded-full flex items-center justify-center mb-6 mx-auto pulse-red">
                        <i class="fas fa-shield-alt text-white text-3xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-center mb-4 text-red-400">Safety</h3>
                    <p class="text-gray-300 text-center mb-4">Real-time risk alerts powered by Sentinel satellites and Copernicus data</p>
                    <div class="flex items-center justify-center space-x-1 text-xs text-gray-500">
                        <i class="fas fa-satellite"></i>
                        <span>Sentinel & GEOSS</span>
                    </div>
                </div>

                <div class="bg-gray-900 rounded-2xl p-8 border-2 border-green-400 glow-green card-hover cursor-pointer parallax-layer touch-feedback"
                     @mouseenter="$el.style.transform = 'translateY(-12px) scale(1.03)'"
                     @mouseleave="$el.style.transform = 'translateY(0) scale(1)'">
                    <div class="w-20 h-20 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mb-6 mx-auto pulse-green">
                        <i class="fas fa-leaf text-white text-3xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-center mb-4 neon-green">Sustainability</h3>
                    <p class="text-gray-300 text-center mb-4">Minimize environmental impact with Copernicus LULC verified routes</p>
                    <div class="flex items-center justify-center space-x-1 text-xs text-gray-500">
                        <i class="fas fa-satellite-dish"></i>
                        <span>Copernicus LULC</span>
                    </div>
                </div>

                <div class="bg-gray-900 rounded-2xl p-8 border-2 border-blue-500 glow-blue card-hover cursor-pointer parallax-layer touch-feedback"
                     @mouseenter="$el.style.transform = 'translateY(-12px) scale(1.03)'"
                     @mouseleave="$el.style.transform = 'translateY(0) scale(1)'">
                    <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center mb-6 mx-auto pulse-green" style="animation-delay: 0.5s;">
                        <i class="fas fa-location-arrow text-white text-3xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-center mb-4 cobalt-blue">Accessibility</h3>
                    <p class="text-gray-300 text-center mb-4">Centimeter-level navigation accuracy with Galileo GNSS</p>
                    <div class="flex items-center justify-center space-x-1 text-xs text-gray-500">
                        <i class="fas fa-satellite"></i>
                        <span>Galileo & EGNOS</span>
                    </div>
                </div>
            </div>

            <button @click="currentScreen = 'location-permission'" class="w-full bg-gradient-to-r from-green-400 to-blue-500 text-black font-semibold py-4 rounded-xl hover:opacity-90 transition-opacity">
                Continue to Setup
            </button>
        </div>
    </div>

    <!-- S4. Location Permission -->
    <div x-show="currentScreen === 'location-permission'" class="min-h-screen bg-black p-4 md:p-6 flex items-center justify-center">
        <div class="max-w-md mx-auto text-center">
            <div class="w-24 h-24 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center mb-6 mx-auto">
                <i class="fas fa-map-marker-alt text-white text-3xl"></i>
            </div>
            <h2 class="text-2xl md:text-3xl font-bold mb-4">Enable Precise Location</h2>
            <p class="text-gray-400 mb-8">For centimetre-level navigation and high accuracy, EcoRover requires permanent Galileo GNSS activation.</p>
            
            <div class="bg-gray-900 rounded-2xl p-6 mb-8 border border-blue-500">
                <div class="flex items-center justify-between mb-4 hover:bg-gray-800 p-2 rounded-lg transition-colors">
                    <div class="flex items-center">
                        <i class="fas fa-satellite text-green-400 mr-3"></i>
                        <span class="text-white font-medium">Galileo GNSS</span>
                    </div>
                    <div @click="toggleGalileo()" 
                         :class="galileoEnabled ? 'bg-green-400 justify-end' : 'bg-gray-600 justify-start'" 
                         class="w-14 h-7 rounded-full flex items-center px-1 cursor-pointer transition-all touch-feedback">
                        <div class="w-5 h-5 bg-white rounded-full shadow-lg"></div>
                    </div>
                </div>
                <div class="flex items-center justify-between mb-4 hover:bg-gray-800 p-2 rounded-lg transition-colors">
                    <div class="flex items-center">
                        <i class="fas fa-broadcast-tower text-orange-400 mr-3"></i>
                        <span class="text-white font-medium">EGNOS Corrections</span>
                    </div>
                    <div @click="toggleEgnos()" 
                         :class="egnosEnabled ? 'bg-green-400 justify-end' : 'bg-gray-600 justify-start'" 
                         class="w-14 h-7 rounded-full flex items-center px-1 cursor-pointer transition-all touch-feedback">
                        <div class="w-5 h-5 bg-white rounded-full shadow-lg"></div>
                    </div>
                </div>
                <div class="flex items-center justify-between hover:bg-gray-800 p-2 rounded-lg transition-colors">
                    <div class="flex items-center">
                        <i class="fas fa-location-arrow text-blue-400 mr-3"></i>
                        <span class="text-white font-medium">Background Location</span>
                    </div>
                    <div @click="toggleBackgroundLocation()" 
                         :class="backgroundLocationEnabled ? 'bg-green-400 justify-end' : 'bg-gray-600 justify-start'" 
                         class="w-14 h-7 rounded-full flex items-center px-1 cursor-pointer transition-all touch-feedback">
                        <div class="w-5 h-5 bg-white rounded-full shadow-lg"></div>
                    </div>
                </div>
            </div>

            <button @click="currentScreen = 'role-definition'" class="w-full bg-gradient-to-r from-green-400 to-blue-500 text-black font-semibold py-4 rounded-xl hover:opacity-90 transition-opacity mb-4">
                Allow Location Access
            </button>
            <p class="text-gray-500 text-sm">You can change these settings anytime in your device settings</p>
        </div>
    </div>

    <!-- S5. Role Definition -->
    <div x-show="currentScreen === 'role-definition'" class="min-h-screen bg-black p-4 md:p-6">
        <div class="max-w-4xl mx-auto pt-8">
            <div class="text-center mb-8">
                <h2 class="text-2xl md:text-3xl font-bold mb-4">Define Your Adventure Profile</h2>
                <p class="text-gray-400">Help us customize your experience</p>
            </div>

            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4">Primary Activity</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div @click="primaryRole = 'hiker'" 
                         :class="primaryRole === 'hiker' ? 'border-green-400 bg-green-400/20' : 'border-gray-700'" 
                         class="bg-gray-900 rounded-xl p-4 border-2 hover:border-green-400 cursor-pointer text-center transition-all touch-feedback">
                        <i class="fas fa-hiking text-2xl mb-2 text-green-400"></i>
                        <p class="text-sm font-medium">Hiker</p>
                        <i x-show="primaryRole === 'hiker'" class="fas fa-check-circle text-green-400 mt-2"></i>
                    </div>
                    <div @click="primaryRole = 'camper'" 
                         :class="primaryRole === 'camper' ? 'border-green-400 bg-green-400/20' : 'border-gray-700'" 
                         class="bg-gray-900 rounded-xl p-4 border-2 hover:border-green-400 cursor-pointer text-center transition-all touch-feedback">
                        <i class="fas fa-campground text-2xl mb-2 text-green-400"></i>
                        <p class="text-sm font-medium">Camper</p>
                        <i x-show="primaryRole === 'camper'" class="fas fa-check-circle text-green-400 mt-2"></i>
                    </div>
                    <div @click="primaryRole = 'wheelchair'" 
                         :class="primaryRole === 'wheelchair' ? 'border-green-400 bg-green-400/20' : 'border-gray-700'" 
                         class="bg-gray-900 rounded-xl p-4 border-2 hover:border-green-400 cursor-pointer text-center transition-all touch-feedback">
                        <i class="fas fa-wheelchair text-2xl mb-2 text-green-400"></i>
                        <p class="text-sm font-medium">Wheelchair User</p>
                        <i x-show="primaryRole === 'wheelchair'" class="fas fa-check-circle text-green-400 mt-2"></i>
                    </div>
                    <div @click="primaryRole = 'cyclist'" 
                         :class="primaryRole === 'cyclist' ? 'border-green-400 bg-green-400/20' : 'border-gray-700'" 
                         class="bg-gray-900 rounded-xl p-4 border-2 hover:border-green-400 cursor-pointer text-center transition-all touch-feedback">
                        <i class="fas fa-bicycle text-2xl mb-2 text-green-400"></i>
                        <p class="text-sm font-medium">Cyclist</p>
                        <i x-show="primaryRole === 'cyclist'" class="fas fa-check-circle text-green-400 mt-2"></i>
                    </div>
                </div>
            </div>

            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4">Companions</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-gray-900 rounded-xl p-4 border border-gray-700">
                        <div class="flex items-center justify-between mb-2">
                            <span class="flex items-center"><i class="fas fa-user mr-2 text-blue-400"></i>Adults</span>
                            <div class="flex items-center space-x-3">
                                <button @click="decrementAdults()" 
                                        class="w-10 h-10 bg-gray-700 hover:bg-gray-600 rounded-full flex items-center justify-center font-bold text-lg transition-all touch-feedback">-</button>
                                <span class="w-10 text-center font-bold text-lg" x-text="adultsCount"></span>
                                <button @click="incrementAdults()" 
                                        class="w-10 h-10 bg-green-400 hover:bg-green-300 text-black rounded-full flex items-center justify-center font-bold text-lg transition-all touch-feedback">+</button>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-900 rounded-xl p-4 border border-gray-700">
                        <div class="flex items-center justify-between mb-2">
                            <span class="flex items-center"><i class="fas fa-child mr-2 text-yellow-400"></i>Children</span>
                            <div class="flex items-center space-x-3">
                                <button @click="decrementChildren()" 
                                        class="w-10 h-10 bg-gray-700 hover:bg-gray-600 rounded-full flex items-center justify-center font-bold text-lg transition-all touch-feedback">-</button>
                                <span class="w-10 text-center font-bold text-lg" x-text="childrenCount"></span>
                                <button @click="incrementChildren()" 
                                        class="w-10 h-10 bg-green-400 hover:bg-green-300 text-black rounded-full flex items-center justify-center font-bold text-lg transition-all touch-feedback">+</button>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-900 rounded-xl p-4 border border-gray-700">
                        <div class="flex items-center justify-between mb-2">
                            <span class="flex items-center"><i class="fas fa-paw mr-2 text-orange-400"></i>Pets</span>
                            <div class="flex items-center space-x-3">
                                <button @click="decrementPets()" 
                                        class="w-10 h-10 bg-gray-700 hover:bg-gray-600 rounded-full flex items-center justify-center font-bold text-lg transition-all touch-feedback">-</button>
                                <span class="w-10 text-center font-bold text-lg" x-text="petsCount"></span>
                                <button @click="incrementPets()" 
                                        class="w-10 h-10 bg-green-400 hover:bg-green-300 text-black rounded-full flex items-center justify-center font-bold text-lg transition-all touch-feedback">+</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <button @click="currentScreen = 'trip-planning'" class="w-full bg-gradient-to-r from-green-400 to-blue-500 text-black font-semibold py-4 rounded-xl hover:opacity-90 transition-opacity touch-feedback">
                Continue to Trip Planning
            </button>
            
            <!-- EU Space Footer -->
            <div class="mt-12 pt-8 border-t border-gray-800">
                <div class="flex flex-wrap items-center justify-center gap-4 text-xs text-gray-500">
                    <div class="flex items-center">
                        <i class="fas fa-satellite text-green-400 mr-2"></i>
                        <span>Galileo GNSS</span>
                    </div>
                    <span class="text-gray-700">|</span>
                    <div class="flex items-center">
                        <i class="fas fa-satellite-dish text-blue-400 mr-2"></i>
                        <span>Copernicus</span>
                    </div>
                    <span class="text-gray-700">|</span>
                    <div class="flex items-center">
                        <i class="fas fa-broadcast-tower text-orange-400 mr-2"></i>
                        <span>EGNOS</span>
                    </div>
                    <span class="text-gray-700">|</span>
                    <div class="flex items-center">
                        <i class="fas fa-globe text-purple-400 mr-2"></i>
                        <span>IRIS2/GOVSATCOM</span>
                    </div>
                </div>
                <p class="text-center text-xs text-gray-600 mt-4">Powered by EU Space Programme</p>
            </div>
        </div>
    </div>

    <!-- S6-S10. Trip Planning & Input -->
    <div x-show="currentScreen === 'trip-planning'" class="min-h-screen bg-black p-4 md:p-6">
        <div class="max-w-4xl mx-auto pt-8">
            <div class="text-center mb-8">
                <h2 class="text-2xl md:text-3xl font-bold mb-4">Plan Your Adventure</h2>
                <p class="text-gray-400">Configure your perfect outdoor experience</p>
            </div>

            <!-- Map Interface -->
            <div class="bg-gray-900 rounded-2xl p-6 mb-6 border border-blue-500">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <i class="fas fa-map-marked-alt mr-3 cobalt-blue"></i>
                    Interactive Route Planning
                </h3>
                <div class="bg-gray-800 rounded-xl h-80 md:h-96 mb-4 relative overflow-hidden border-2 border-gray-700">
                    <!-- Google Maps-Style Realistic Terrain Map Background -->
                    <svg class="absolute inset-0 w-full h-full" viewBox="0 0 500 400" preserveAspectRatio="xMidYMid slice">
                        <defs>
                            <!-- Google Maps-style gradients -->
                            <linearGradient id="roadGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#ffffff;stop-opacity:1"/>
                                <stop offset="100%" style="stop-color:#e0e0e0;stop-opacity:1"/>
                            </linearGradient>
                            
                            <linearGradient id="forestGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#c8e6c9;stop-opacity:1"/>
                                <stop offset="100%" style="stop-color:#81c784;stop-opacity:1"/>
                            </linearGradient>
                            
                            <linearGradient id="parkGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#a5d6a7;stop-opacity:1"/>
                                <stop offset="100%" style="stop-color:#66bb6a;stop-opacity:1"/>
                            </linearGradient>
                            
                            <linearGradient id="mountainGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#e0e0e0;stop-opacity:1"/>
                                <stop offset="50%" style="stop-color:#bdbdbd;stop-opacity:1"/>
                                <stop offset="100%" style="stop-color:#9e9e9e;stop-opacity:1"/>
                            </linearGradient>
                            
                            <!-- Terrain textures -->
                            <pattern id="forestTexture" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
                                <circle cx="5" cy="5" r="2" fill="#2d5016" opacity="0.3"/>
                                <circle cx="15" cy="10" r="2" fill="#3a6b1e" opacity="0.3"/>
                                <circle cx="10" cy="15" r="2" fill="#2d5016" opacity="0.3"/>
                            </pattern>
                            <pattern id="grassTexture" x="0" y="0" width="15" height="15" patternUnits="userSpaceOnUse">
                                <rect width="15" height="15" fill="#a5d6a7"/>
                                <line x1="2" y1="0" x2="2" y2="3" stroke="#81c784" stroke-width="0.5"/>
                                <line x1="7" y1="5" x2="7" y2="8" stroke="#81c784" stroke-width="0.5"/>
                                <line x1="12" y1="2" x2="12" y2="5" stroke="#81c784" stroke-width="0.5"/>
                            </pattern>
                            <pattern id="mountainTexture" x="0" y="0" width="30" height="30" patternUnits="userSpaceOnUse">
                                <rect width="30" height="30" fill="#bdbdbd"/>
                                <path d="M0,15 L5,10 L10,15 L15,12 L20,15 L25,8 L30,15" stroke="#9e9e9e" stroke-width="1" fill="none" opacity="0.5"/>
                                <path d="M0,25 L8,20 L15,25 L22,18 L30,25" stroke="#757575" stroke-width="1" fill="none" opacity="0.5"/>
                            </pattern>
                            
                            <!-- Road pattern -->
                            <pattern id="roadPattern" x="0" y="0" width="10" height="10" patternUnits="userSpaceOnUse">
                                <line x1="5" y1="0" x2="5" y2="10" stroke="#ffffff" stroke-width="0.5" stroke-dasharray="2,3"/>
                            </pattern>
                            
                            <!-- Shadow filter -->
                            <filter id="dropShadow">
                                <feGaussianBlur in="SourceAlpha" stdDeviation="2"/>
                                <feOffset dx="1" dy="2" result="offsetblur"/>
                                <feComponentTransfer>
                                    <feFuncA type="linear" slope="0.3"/>
                                </feComponentTransfer>
                                <feMerge>
                                    <feMergeNode/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                            
                            <!-- Contour shadows -->
                            <filter id="terrainShadow">
                                <feGaussianBlur in="SourceAlpha" stdDeviation="2"/>
                                <feOffset dx="2" dy="2" result="offsetblur"/>
                                <feMerge>
                                    <feMergeNode/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                            
                            <!-- Topographic gradient -->
                            <linearGradient id="elevationGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#8b7355;stop-opacity:0.8"/>
                                <stop offset="40%" style="stop-color:#5a7c3f;stop-opacity:0.6"/>
                                <stop offset="70%" style="stop-color:#4a7c2f;stop-opacity:0.5"/>
                                <stop offset="100%" style="stop-color:#2d5016;stop-opacity:0.4"/>
                            </linearGradient>
                        </defs>
                        
                        <!-- Google Maps-style base terrain (light background) -->
                        <rect width="500" height="400" fill="#f5f5f5"/>
                        
                        <!-- Large forest/park areas with Google Maps green -->
                        <ellipse cx="100" cy="300" rx="80" ry="60" fill="url(#forestGradient)" opacity="0.8" filter="url(#dropShadow)"/>
                        <ellipse cx="350" cy="280" rx="100" ry="70" fill="url(#parkGradient)" opacity="0.8" filter="url(#dropShadow)"/>
                        <ellipse cx="450" cy="350" rx="60" ry="50" fill="url(#forestGradient)" opacity="0.8" filter="url(#dropShadow)"/>
                        
                        <!-- Lighter grassland/meadow areas -->
                        <ellipse cx="250" cy="320" rx="120" ry="80" fill="#c8e6c9" opacity="0.6"/>
                        
                        <!-- Mountain/rocky areas with realistic shading -->
                        <path d="M200,80 Q250,40 300,70 L320,90 Q340,60 380,110 L400,130 L380,150 L300,130 L200,110 Z" 
                              fill="url(#mountainGradient)" opacity="0.9" filter="url(#dropShadow)"/>
                        
                        <!-- Roads (Google Maps style) -->
                        <path d="M20,380 Q100,360 180,350 Q260,340 340,330 Q420,320 480,310" 
                              stroke="#ffffff" stroke-width="6" fill="none" opacity="0.9" filter="url(#dropShadow)"/>
                        <path d="M20,380 Q100,360 180,350 Q260,340 340,330 Q420,320 480,310" 
                              stroke="#ffa726" stroke-width="4" fill="none" opacity="0.8"/>
                        
                        <path d="M10,200 Q90,180 170,190 Q250,200 330,190 Q410,180 490,190" 
                              stroke="#ffffff" stroke-width="5" fill="none" opacity="0.9" filter="url(#dropShadow)"/>
                        <path d="M10,200 Q90,180 170,190 Q250,200 330,190 Q410,180 490,190" 
                              stroke="#ffa726" stroke-width="3" fill="none" opacity="0.8"/>
                        
                        <!-- Trail paths (dashed) -->
                        <path d="M80,280 Q140,260 200,270 Q260,280 320,260" 
                              stroke="#8d6e63" stroke-width="3" stroke-dasharray="8,4" fill="none" opacity="0.7"/>
                        
                        <!-- Detailed topographic contour lines -->
                        <g stroke="#4a6b2f" stroke-width="0.5" fill="none" opacity="0.4">
                            <!-- Lower elevation -->
                            <path d="M20,350 Q100,340 180,350 Q260,360 340,350 Q420,340 480,350"/>
                            <path d="M30,320 Q110,310 190,320 Q270,330 350,320 Q430,310 490,320"/>
                            <path d="M40,290 Q120,280 200,290 Q280,300 360,290 Q440,280 500,290"/>
                            
                            <!-- Mid elevation -->
                            <path d="M50,260 Q130,250 210,260 Q290,270 370,260 Q430,255 490,260"/>
                            <path d="M60,230 Q140,220 220,230 Q300,240 380,230 Q440,225 490,230"/>
                            <path d="M80,200 Q160,190 240,200 Q320,210 400,200 Q460,195 500,200"/>
                            
                            <!-- Higher elevation -->
                            <path d="M120,170 Q200,160 280,170 Q360,180 420,170"/>
                            <path d="M150,140 Q230,130 310,140 Q370,145 430,140"/>
                            <path d="M180,110 Q260,100 340,110 Q380,115 420,110"/>
                            
                            <!-- Peak contours -->
                            <ellipse cx="280" cy="90" rx="60" ry="30" stroke="#6b6b6b" stroke-width="1" opacity="0.6"/>
                            <ellipse cx="280" cy="90" rx="40" ry="20" stroke="#7b7b7b" stroke-width="1" opacity="0.7"/>
                            <ellipse cx="280" cy="90" rx="20" ry="10" stroke="#8b8b8b" stroke-width="1" opacity="0.8"/>
                        </g>
                        
                        <!-- Google Maps-style labels -->
                        <g font-family="Roboto, Arial, sans-serif" font-weight="500">
                            <!-- Park name -->
                            <text x="100" y="305" text-anchor="middle" fill="#2d5016" font-size="11" font-weight="600">Alpine Forest</text>
                            <text x="100" y="318" text-anchor="middle" fill="#4a7c2f" font-size="8">National Park</text>
                            
                            <!-- Summit -->
                            <text x="290" y="75" text-anchor="middle" fill="#424242" font-size="10" font-weight="600">Eagle Peak</text>
                            <text x="290" y="88" text-anchor="middle" fill="#757575" font-size="8">1,847 m</text>
                            
                            <!-- Meadow -->
                            <text x="250" y="330" text-anchor="middle" fill="#4a7c2f" font-size="10">Wildflower Meadow</text>
                            
                            <!-- Pine grove -->
                            <text x="350" y="285" text-anchor="middle" fill="#2d5016" font-size="10">Pine Grove Trail</text>
                        </g>
                        
                        <!-- Water features (Google Maps blue) -->
                        <g stroke="#64b5f6" stroke-width="3" fill="none" opacity="0.7">
                            <path d="M10,200 Q50,190 90,200 Q130,210 170,200 Q210,190 250,200"/>
                            <path d="M300,150 Q330,140 360,150 Q390,160 420,150 Q450,140 480,150"/>
                        </g>
                        <text x="150" y="195" text-anchor="middle" fill="#1976d2" font-size="8" font-weight="500">Crystal Creek</text>
                        
                        <!-- Google Maps-style POI markers -->
                        <g>
                            <!-- Parking -->
                            <circle cx="40" cy="370" r="8" fill="#1976d2" stroke="#ffffff" stroke-width="2"/>
                            <text x="40" y="374" text-anchor="middle" fill="#ffffff" font-size="10">P</text>
                            <text x="40" y="390" text-anchor="middle" fill="#424242" font-size="8" font-weight="500">Parking</text>
                            
                            <!-- Viewpoint -->
                            <circle cx="340" cy="110" r="8" fill="#ff6f00" stroke="#ffffff" stroke-width="2"/>
                            <text x="340" y="114" text-anchor="middle" fill="#ffffff" font-size="10">üì∑</text>
                            <text x="340" y="100" text-anchor="middle" fill="#424242" font-size="8" font-weight="500">Viewpoint</text>
                            
                            <!-- Camping -->
                            <circle cx="180" cy="300" r="8" fill="#43a047" stroke="#ffffff" stroke-width="2"/>
                            <text x="180" y="114" text-anchor="middle" fill="#ffffff" font-size="10">‚õ∫</text>
                            <text x="180" y="290" text-anchor="middle" fill="#424242" font-size="8" font-weight="500">Camp</text>
                        </g>
                    </svg>
                    
                    <!-- Interactive SVG Map -->
                    <svg class="absolute inset-0 w-full h-full" viewBox="0 0 500 400" preserveAspectRatio="xMidYMid meet">
                        <!-- Environmental Overlay Zones -->
                        <g id="environmentalZones" opacity="0.6">
                            <!-- Protected vegetation area -->
                            <ellipse cx="200" cy="180" rx="60" ry="45" fill="#2d5016" opacity="0.4"/>
                            <text x="200" y="185" text-anchor="middle" fill="#4ade80" font-size="8" font-weight="bold">üå≥ PROTECTED</text>
                            <text x="200" y="195" text-anchor="middle" fill="#4ade80" font-size="7">Ancient Forest</text>
                            
                            <!-- Steep slope warning area -->
                            <polygon points="320,220 360,200 380,240 340,260" fill="#ff6b6b" opacity="0.3"/>
                            <text x="350" y="230" text-anchor="middle" fill="#ff6b6b" font-size="8" font-weight="bold">‚ö†Ô∏è STEEP</text>
                            <text x="350" y="240" text-anchor="middle" fill="#ff6b6b" font-size="7">25% Grade</text>
                            
                            <!-- Fire risk zone -->
                            <rect x="240" y="250" width="80" height="60" rx="10" fill="#ff4500" opacity="0.25"/>
                            <text x="280" y="275" text-anchor="middle" fill="#ff8c00" font-size="8" font-weight="bold">üî• FIRE RISK</text>
                            <text x="280" y="285" text-anchor="middle" fill="#ff8c00" font-size="7">Dry Grassland</text>
                            
                            <!-- Wildlife corridor -->
                            <ellipse cx="140" cy="220" rx="50" ry="35" fill="#9333ea" opacity="0.3"/>
                            <text x="140" y="220" text-anchor="middle" fill="#c084fc" font-size="8" font-weight="bold">ü¶å WILDLIFE</text>
                            <text x="140" y="230" text-anchor="middle" fill="#c084fc" font-size="7">Migration Path</text>
                            
                            <!-- Erosion-sensitive area -->
                            <circle cx="380" cy="160" r="35" fill="#d97706" opacity="0.3"/>
                            <text x="380" y="160" text-anchor="middle" fill="#fbbf24" font-size="8" font-weight="bold">‚õ∞Ô∏è EROSION</text>
                            <text x="380" y="170" text-anchor="middle" fill="#fbbf24" font-size="7">Fragile Soil</text>
                        </g>
                        
                        <!-- Route options with click handlers -->
                        <g id="routes">
                            <!-- Green eco-friendly route - CLICKABLE -->
                            <path d="M50,250 Q120,180 180,200 Q240,220 300,190 Q360,160 430,180" 
                                  @click="selectRoute('green')"
                                  class="route-line cursor-pointer hover:opacity-100 transition-all" 
                                  stroke="#00FF00" 
                                  stroke-width="6" 
                                  fill="none"
                                  :opacity="selectedRoute === 'green' ? '1' : '0.5'"
                                  :stroke-width="selectedRoute === 'green' ? '8' : '6'"
                                  style="filter: drop-shadow(0 0 8px #00FF00);"
                                  pointer-events="stroke"/>
                            <text x="250" y="175" text-anchor="middle" fill="#00FF00" font-size="10" font-weight="bold" 
                                  @click="selectRoute('green')" class="cursor-pointer" pointer-events="all">
                                üåø Eco Path
                            </text>
                            
                            <!-- Blue safe route - CLICKABLE -->
                            <path d="M50,250 Q150,120 250,140 Q350,160 430,150" 
                                  @click="selectRoute('safe')"
                                  class="route-line cursor-pointer hover:opacity-100 transition-all" 
                                  stroke="#FFD700" 
                                  stroke-width="5" 
                                  fill="none"
                                  :opacity="selectedRoute === 'safe' ? '1' : '0.4'"
                                  :stroke-width="selectedRoute === 'safe' ? '7' : '5'"
                                  style="filter: drop-shadow(0 0 6px #FFD700);"
                                  pointer-events="stroke"/>
                            <text x="250" y="125" text-anchor="middle" fill="#FFD700" font-size="10" font-weight="bold" 
                                  @click="selectRoute('safe')" class="cursor-pointer" pointer-events="all">
                                üõ°Ô∏è Safe Route
                            </text>
                            
                            <!-- Orange fast route - CLICKABLE -->
                            <path d="M50,250 Q100,280 180,270 Q260,260 340,250 Q390,240 430,235" 
                                  @click="selectRoute('fastest')"
                                  class="route-line cursor-pointer hover:opacity-100 transition-all" 
                                  stroke="#007FFF" 
                                  stroke-width="5" 
                                  fill="none"
                                  :opacity="selectedRoute === 'fastest' ? '1' : '0.4'"
                                  :stroke-width="selectedRoute === 'fastest' ? '7' : '5'"
                                  style="filter: drop-shadow(0 0 6px #007FFF);"
                                  pointer-events="stroke"/>
                            <text x="260" y="250" text-anchor="middle" fill="#007FFF" font-size="10" font-weight="bold" 
                                  @click="selectRoute('fastest')" class="cursor-pointer" pointer-events="all">
                                ‚ö° Fast Route
                            </text>
                            
                            <!-- Selection indicators on routes -->
                            <g x-show="selectedRoute === 'green'">
                                <circle cx="180" cy="200" r="8" fill="#00FF00" opacity="0.8">
                                    <animate attributeName="r" values="8;12;8" dur="1.5s" repeatCount="indefinite"/>
                                </circle>
                            </g>
                            <g x-show="selectedRoute === 'safe'">
                                <circle cx="250" cy="140" r="8" fill="#FFD700" opacity="0.8">
                                    <animate attributeName="r" values="8;12;8" dur="1.5s" repeatCount="indefinite"/>
                                </circle>
                            </g>
                            <g x-show="selectedRoute === 'fastest'">
                                <circle cx="260" cy="260" r="8" fill="#007FFF" opacity="0.8">
                                    <animate attributeName="r" values="8;12;8" dur="1.5s" repeatCount="indefinite"/>
                                </circle>
                            </g>
                        </g>
                        
                        <!-- Waypoints and POIs -->
                        <g id="waypoints">
                            <!-- Start point -->
                            <circle cx="50" cy="250" r="12" fill="#00FF00" stroke="#fff" stroke-width="3" class="cursor-pointer hover:r-15 transition-all"/>
                            <text x="50" y="280" text-anchor="middle" fill="#fff" font-size="12" font-weight="bold">START</text>
                            
                            <!-- Campsite waypoint -->
                            <circle cx="180" cy="200" r="8" fill="#FFA500" stroke="#fff" stroke-width="2" class="cursor-pointer hover:r-10 transition-all" opacity="0.8"/>
                            <text x="180" y="190" text-anchor="middle" fill="#FFA500" font-size="10">‚õ∫ Camp</text>
                            
                            <!-- Water source -->
                            <circle cx="250" cy="140" r="8" fill="#007FFF" stroke="#fff" stroke-width="2" class="cursor-pointer hover:r-10 transition-all" opacity="0.8"/>
                            <text x="250" y="130" text-anchor="middle" fill="#007FFF" font-size="10">üíß Water</text>
                            
                            <!-- Viewpoint -->
                            <circle cx="300" cy="190" r="8" fill="#FFD700" stroke="#fff" stroke-width="2" class="cursor-pointer hover:r-10 transition-all" opacity="0.8"/>
                            <text x="300" y="180" text-anchor="middle" fill="#FFD700" font-size="10">üì∑ View</text>
                            
                            <!-- Rest area -->
                            <circle cx="360" cy="160" r="8" fill="#9D4EDD" stroke="#fff" stroke-width="2" class="cursor-pointer hover:r-10 transition-all" opacity="0.8"/>
                            <text x="360" y="150" text-anchor="middle" fill="#9D4EDD" font-size="10">ü™ë Rest</text>
                            
                            <!-- Destination -->
                            <circle cx="430" cy="180" r="12" fill="#FF0000" stroke="#fff" stroke-width="3" class="cursor-pointer hover:r-15 transition-all"/>
                            <text x="430" y="210" text-anchor="middle" fill="#fff" font-size="12" font-weight="bold">END</text>
                        </g>
                        
                        <!-- Satellite coverage indicator -->
                        <g id="satellites" opacity="0.4">
                            <circle cx="100" cy="80" r="30" fill="none" stroke="#00ff00" stroke-width="1" stroke-dasharray="5,5">
                                <animate attributeName="r" values="30;40;30" dur="3s" repeatCount="indefinite"/>
                            </circle>
                            <text x="100" y="85" text-anchor="middle" fill="#00ff00" font-size="10">üõ∞Ô∏è</text>
                        </g>
                    </svg>
                    
                    <!-- Legend overlay -->
                    <div class="absolute top-4 left-4 bg-black/90 rounded-lg px-4 py-3 text-sm border border-gray-700">
                        <div class="font-bold mb-2 text-green-400">Route Options:</div>
                        <div class="flex items-center mb-1.5">
                            <div class="w-4 h-0.5 bg-green-400 mr-2" style="box-shadow: 0 0 4px #00ff00;"></div>
                            <span class="text-xs">Eco-Friendly (Lowest Impact)</span>
                        </div>
                        <div class="flex items-center mb-1.5">
                            <div class="w-4 h-0.5 bg-blue-500 mr-2"></div>
                            <span class="text-xs">Safest (Risk Minimized)</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-4 h-0.5 bg-orange-400 mr-2"></div>
                            <span class="text-xs">Fastest (Time Optimized)</span>
                        </div>
                    </div>
                    
                    <!-- Real-time info panel -->
                    <div class="absolute top-4 right-4 bg-black/90 rounded-lg px-4 py-3 text-xs border border-gray-700">
                        <div class="flex items-center mb-2">
                            <i class="fas fa-satellite text-green-400 mr-2"></i>
                            <span><span class="font-bold text-green-400">Galileo:</span> Active (12 sats)</span>
                        </div>
                        <div class="flex items-center mb-2">
                            <i class="fas fa-map-marker-alt text-blue-400 mr-2"></i>
                            <span><span class="font-bold text-blue-400">Accuracy:</span> ¬±0.3m</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-cloud text-purple-400 mr-2"></i>
                            <span><span class="font-bold text-purple-400">Copernicus:</span> Live Data</span>
                        </div>
                    </div>
                    
                    <!-- Distance & elevation profile at bottom -->
                    <div class="absolute bottom-4 left-4 right-4 bg-black/90 rounded-lg px-4 py-3 border border-gray-700">
                        <div class="flex justify-between items-center text-xs mb-2">
                            <div class="flex items-center">
                                <i class="fas fa-route text-green-400 mr-2"></i>
                                <span><span class="font-bold">Distance:</span> 12.4 km</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-mountain text-orange-400 mr-2"></i>
                                <span><span class="font-bold">Elevation:</span> ‚Üë 450m ‚Üì 320m</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-clock text-blue-400 mr-2"></i>
                                <span><span class="font-bold">Est. Time:</span> 4h 15min</span>
                            </div>
                        </div>
                        <!-- Mini elevation chart -->
                        <svg width="100%" height="30" class="opacity-70">
                            <polyline points="0,25 50,20 100,15 150,18 200,12 250,10 300,15 350,20 400,22 450,25" 
                                      fill="none" 
                                      stroke="#00ff00" 
                                      stroke-width="2"/>
                            <polyline points="0,30 50,20 100,15 150,18 200,12 250,10 300,15 350,20 400,22 450,25 450,30 0,30" 
                                      fill="url(#elevGradient)" 
                                      opacity="0.3"/>
                            <defs>
                                <linearGradient id="elevGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#00ff00;stop-opacity:0.5"/>
                                    <stop offset="100%" style="stop-color:#00ff00;stop-opacity:0"/>
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                </div>
                
                <!-- Location inputs -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="relative">
                        <i class="fas fa-map-marker-alt absolute left-4 top-4 text-green-400"></i>
                        <input type="text" 
                               placeholder="Starting location" 
                               value="Trailhead Parking - Alpine Valley"
                               class="w-full bg-gray-800 border border-gray-600 rounded-xl pl-12 pr-4 py-3 text-white placeholder-gray-400 focus:border-green-400 focus:outline-none focus:ring-2 focus:ring-green-400/50 transition-all">
                    </div>
                    <div class="relative">
                        <i class="fas fa-flag-checkered absolute left-4 top-4 text-red-400"></i>
                        <input type="text" 
                               placeholder="Destination" 
                               value="Summit Peak Viewpoint"
                               class="w-full bg-gray-800 border border-gray-600 rounded-xl pl-12 pr-4 py-3 text-white placeholder-gray-400 focus:border-red-400 focus:outline-none focus:ring-2 focus:ring-red-400/50 transition-all">
                    </div>
                </div>
                
                <!-- Quick stats -->
                <div class="grid grid-cols-3 gap-4 mt-4">
                    <div class="bg-gray-800/50 rounded-lg p-3 text-center border border-green-400/30">
                        <div class="text-2xl font-bold text-green-400">92</div>
                        <div class="text-xs text-gray-400">Sustainability</div>
                    </div>
                    <div class="bg-gray-800/50 rounded-lg p-3 text-center border border-blue-400/30">
                        <div class="text-2xl font-bold text-blue-400">87</div>
                        <div class="text-xs text-gray-400">Safety Score</div>
                    </div>
                    <div class="bg-gray-800/50 rounded-lg p-3 text-center border border-orange-400/30">
                        <div class="text-2xl font-bold text-orange-400">95</div>
                        <div class="text-xs text-gray-400">Accessibility</div>
                    </div>
                </div>
            </div>

            <!-- Activities & Terrain -->
            <div class="bg-gray-900 rounded-2xl p-6 mb-6">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <i class="fas fa-mountain mr-3 text-green-400"></i>
                    Activities & Terrain
                </h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                    <div @click="toggleActivity('hiking')" 
                         :class="selectedActivities.includes('hiking') ? 'bg-green-400/30 border-2 border-green-400' : 'bg-gray-800 border-2 border-transparent'" 
                         class="rounded-xl p-4 text-center cursor-pointer hover:bg-green-400/20 transition-all touch-feedback">
                        <i class="fas fa-hiking text-2xl mb-2 text-green-400"></i>
                        <p class="text-sm">Hiking</p>
                        <div x-show="selectedActivities.includes('hiking')" class="mt-2">
                            <i class="fas fa-check-circle text-green-400"></i>
                        </div>
                    </div>
                    <div @click="toggleActivity('campfire')" 
                         :class="selectedActivities.includes('campfire') ? 'bg-orange-400/30 border-2 border-orange-400' : 'bg-gray-800 border-2 border-transparent'" 
                         class="rounded-xl p-4 text-center cursor-pointer hover:bg-orange-400/20 transition-all touch-feedback">
                        <i class="fas fa-fire text-2xl mb-2 text-orange-400"></i>
                        <p class="text-sm">Campfire</p>
                        <div x-show="selectedActivities.includes('campfire')" class="mt-2">
                            <i class="fas fa-check-circle text-orange-400"></i>
                        </div>
                    </div>
                    <div @click="toggleActivity('swimming')" 
                         :class="selectedActivities.includes('swimming') ? 'bg-blue-400/30 border-2 border-blue-400' : 'bg-gray-800 border-2 border-transparent'" 
                         class="rounded-xl p-4 text-center cursor-pointer hover:bg-blue-400/20 transition-all touch-feedback">
                        <i class="fas fa-swimmer text-2xl mb-2 text-blue-400"></i>
                        <p class="text-sm">Swimming</p>
                        <div x-show="selectedActivities.includes('swimming')" class="mt-2">
                            <i class="fas fa-check-circle text-blue-400"></i>
                        </div>
                    </div>
                    <div @click="toggleActivity('photography')" 
                         :class="selectedActivities.includes('photography') ? 'bg-purple-400/30 border-2 border-purple-400' : 'bg-gray-800 border-2 border-transparent'" 
                         class="rounded-xl p-4 text-center cursor-pointer hover:bg-purple-400/20 transition-all touch-feedback">
                        <i class="fas fa-camera text-2xl mb-2 text-purple-400"></i>
                        <p class="text-sm">Photography</p>
                        <div x-show="selectedActivities.includes('photography')" class="mt-2">
                            <i class="fas fa-check-circle text-purple-400"></i>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div @click="toggleTerrain('sandy')" 
                         :class="selectedTerrains.includes('sandy') ? 'bg-blue-400/30 border-2 border-blue-400' : 'bg-gray-800 border-2 border-transparent'" 
                         class="rounded-xl p-3 text-center cursor-pointer hover:bg-blue-400/20 transition-all touch-feedback">
                        <i class="fas fa-water text-blue-400 mb-1"></i>
                        <p class="text-xs">Sandy</p>
                    </div>
                    <div @click="toggleTerrain('rocky')" 
                         :class="selectedTerrains.includes('rocky') ? 'bg-gray-400/30 border-2 border-gray-400' : 'bg-gray-800 border-2 border-transparent'" 
                         class="rounded-xl p-3 text-center cursor-pointer hover:bg-gray-400/20 transition-all touch-feedback">
                        <i class="fas fa-mountain text-gray-400 mb-1"></i>
                        <p class="text-xs">Rocky</p>
                    </div>
                    <div @click="toggleTerrain('forest')" 
                         :class="selectedTerrains.includes('forest') ? 'bg-green-400/30 border-2 border-green-400' : 'bg-gray-800 border-2 border-transparent'" 
                         class="rounded-xl p-3 text-center cursor-pointer hover:bg-green-400/20 transition-all touch-feedback">
                        <i class="fas fa-tree text-green-400 mb-1"></i>
                        <p class="text-xs">Forest</p>
                    </div>
                    <div @click="toggleTerrain('alpine')" 
                         :class="selectedTerrains.includes('alpine') ? 'bg-blue-200/30 border-2 border-blue-200' : 'bg-gray-800 border-2 border-transparent'" 
                         class="rounded-xl p-3 text-center cursor-pointer hover:bg-blue-200/20 transition-all touch-feedback">
                        <i class="fas fa-snowflake text-blue-200 mb-1"></i>
                        <p class="text-xs">Alpine</p>
                    </div>
                </div>
            </div>

            <!-- Sustainability Filter -->
            <div class="bg-gray-900 rounded-2xl p-6 mb-6">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <i class="fas fa-leaf mr-3 neon-green"></i>
                    Sustainability Target
                </h3>
                <div class="relative">
                    <input type="range" min="0" max="100" value="75" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer">
                    <div class="flex justify-between text-sm text-gray-400 mt-2">
                        <span>Minimum Impact</span>
                        <span class="neon-green font-semibold">Zero Trace (Highest Score)</span>
                    </div>
                </div>
                <p class="text-xs text-gray-500 mt-2">Powered by Copernicus LULC data</p>
            </div>

            <!-- Safety Alerts Filter -->
            <div class="bg-gray-900 rounded-2xl p-6 mb-6">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <i class="fas fa-exclamation-triangle mr-3 text-orange-400"></i>
                    Safety Alert Preferences
                </h3>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="flex items-center justify-between bg-gray-800 rounded-xl p-3 hover:bg-gray-700 transition-colors">
                        <span class="text-sm font-medium">Fire Risk</span>
                        <div @click="toggleAlert('alertFire')" 
                             :class="alertFire ? 'bg-green-400 justify-end' : 'bg-gray-600 justify-start'" 
                             class="w-14 h-7 rounded-full flex items-center px-1 cursor-pointer transition-all touch-feedback">
                            <div class="w-5 h-5 bg-white rounded-full shadow-lg"></div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between bg-gray-800 rounded-xl p-3 hover:bg-gray-700 transition-colors">
                        <span class="text-sm font-medium">Flood</span>
                        <div @click="toggleAlert('alertFlood')" 
                             :class="alertFlood ? 'bg-green-400 justify-end' : 'bg-gray-600 justify-start'" 
                             class="w-14 h-7 rounded-full flex items-center px-1 cursor-pointer transition-all touch-feedback">
                            <div class="w-5 h-5 bg-white rounded-full shadow-lg"></div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between bg-gray-800 rounded-xl p-3 hover:bg-gray-700 transition-colors">
                        <span class="text-sm font-medium">Landslide</span>
                        <div @click="toggleAlert('alertLandslide')" 
                             :class="alertLandslide ? 'bg-green-400 justify-end' : 'bg-gray-600 justify-start'" 
                             class="w-14 h-7 rounded-full flex items-center px-1 cursor-pointer transition-all touch-feedback">
                            <div class="w-5 h-5 bg-white rounded-full shadow-lg"></div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between bg-gray-800 rounded-xl p-3 hover:bg-gray-700 transition-colors">
                        <span class="text-sm font-medium">Avalanche</span>
                        <div @click="toggleAlert('alertAvalanche')" 
                             :class="alertAvalanche ? 'bg-green-400 justify-end' : 'bg-gray-600 justify-start'" 
                             class="w-14 h-7 rounded-full flex items-center px-1 cursor-pointer transition-all touch-feedback">
                            <div class="w-5 h-5 bg-white rounded-full shadow-lg"></div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between bg-gray-800 rounded-xl p-3 hover:bg-gray-700 transition-colors">
                        <span class="text-sm font-medium">Lightning</span>
                        <div @click="toggleAlert('alertLightning')" 
                             :class="alertLightning ? 'bg-green-400 justify-end' : 'bg-gray-600 justify-start'" 
                             class="w-14 h-7 rounded-full flex items-center px-1 cursor-pointer transition-all touch-feedback">
                            <div class="w-5 h-5 bg-white rounded-full shadow-lg"></div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between bg-gray-800 rounded-xl p-3 hover:bg-gray-700 transition-colors">
                        <span class="text-sm font-medium">Geological</span>
                        <div @click="toggleAlert('alertGeological')" 
                             :class="alertGeological ? 'bg-green-400 justify-end' : 'bg-gray-600 justify-start'" 
                             class="w-14 h-7 rounded-full flex items-center px-1 cursor-pointer transition-all touch-feedback">
                            <div class="w-5 h-5 bg-white rounded-full shadow-lg"></div>
                        </div>
                    </div>
                </div>
                <p class="text-xs text-gray-500 mt-2">Data from Copernicus Sentinel & GEOSS</p>
            </div>

            <!-- Accessibility Filter -->
            <div class="bg-gray-900 rounded-2xl p-6 mb-8">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <i class="fas fa-universal-access mr-3 cobalt-blue"></i>
                    Accessibility Requirements
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">Max Slope (%)</label>
                        <input type="number" value="15" class="w-full bg-gray-800 border border-gray-600 rounded-xl px-4 py-3 text-white focus:border-blue-400 focus:outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Min Path Width (meters)</label>
                        <input type="number" value="1.2" step="0.1" class="w-full bg-gray-800 border border-gray-600 rounded-xl px-4 py-3 text-white focus:border-blue-400 focus:outline-none">
                    </div>
                </div>
                <div class="mt-4">
                    <label class="block text-sm font-medium mb-2">Surface Type</label>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                        <div @click="selectSurface('paved')" 
                             :class="selectedSurface === 'paved' ? 'bg-blue-400/30 border-2 border-blue-400' : 'bg-gray-800 border-2 border-transparent'" 
                             class="rounded-lg p-3 text-center cursor-pointer hover:bg-blue-400/20 transition-all touch-feedback">
                            <i class="fas fa-road text-blue-400 mb-1"></i>
                            <p class="text-xs font-medium">Paved</p>
                            <i x-show="selectedSurface === 'paved'" class="fas fa-check-circle text-blue-400 text-xs mt-1"></i>
                        </div>
                        <div @click="selectSurface('compacted')" 
                             :class="selectedSurface === 'compacted' ? 'bg-blue-400/30 border-2 border-blue-400' : 'bg-gray-800 border-2 border-transparent'" 
                             class="rounded-lg p-3 text-center cursor-pointer hover:bg-blue-400/20 transition-all touch-feedback">
                            <i class="fas fa-compress text-blue-400 mb-1"></i>
                            <p class="text-xs font-medium">Compacted</p>
                            <i x-show="selectedSurface === 'compacted'" class="fas fa-check-circle text-blue-400 text-xs mt-1"></i>
                        </div>
                        <div @click="selectSurface('gravel')" 
                             :class="selectedSurface === 'gravel' ? 'bg-blue-400/30 border-2 border-blue-400' : 'bg-gray-800 border-2 border-transparent'" 
                             class="rounded-lg p-3 text-center cursor-pointer hover:bg-blue-400/20 transition-all touch-feedback">
                            <i class="fas fa-circle text-blue-400 mb-1"></i>
                            <p class="text-xs font-medium">Gravel</p>
                            <i x-show="selectedSurface === 'gravel'" class="fas fa-check-circle text-blue-400 text-xs mt-1"></i>
                        </div>
                        <div @click="selectSurface('natural')" 
                             :class="selectedSurface === 'natural' ? 'bg-blue-400/30 border-2 border-blue-400' : 'bg-gray-800 border-2 border-transparent'" 
                             class="rounded-lg p-3 text-center cursor-pointer hover:bg-blue-400/20 transition-all touch-feedback">
                            <i class="fas fa-leaf text-blue-400 mb-1"></i>
                            <p class="text-xs font-medium">Natural</p>
                            <i x-show="selectedSurface === 'natural'" class="fas fa-check-circle text-blue-400 text-xs mt-1"></i>
                        </div>
                    </div>
                </div>
                <p class="text-xs text-gray-500 mt-2">Validated by Galileo/EGNOS accuracy</p>
            </div>

            <button @click="currentScreen = 'loading'" class="w-full bg-gradient-to-r from-green-400 to-blue-500 text-black font-semibold py-4 rounded-xl hover:opacity-90 transition-opacity">
                Analyze Routes
            </button>
        </div>
    </div>

    <!-- S11. Loading Screen with Advanced 3D Satellite Animation -->
    <div x-show="currentScreen === 'loading'" class="fixed inset-0 bg-black flex flex-col items-center justify-center z-50">
        <div class="relative mb-12" style="perspective: 1000px;">
            <!-- Central Earth with Rotation -->
            <div class="relative w-40 h-40 mx-auto">
                <div class="absolute inset-0 bg-gradient-to-br from-green-600 via-blue-700 to-green-800 rounded-full flex items-center justify-center earth-rotate" style="box-shadow: 0 0 80px rgba(0, 255, 0, 0.4), inset 0 0 60px rgba(0, 127, 255, 0.3);">
                    <i class="fas fa-globe-americas text-white text-5xl"></i>
                </div>
                
                <!-- Orbit Rings -->
                <div class="absolute inset-0 w-48 h-48 -m-4 border border-green-400/30 rounded-full"></div>
                <div class="absolute inset-0 w-56 h-56 -m-8 border border-blue-400/20 rounded-full"></div>
                
                <!-- Sentinel Satellites with Data Stream -->
                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
                    <div class="satellite-orbit">
                        <div class="relative">
                            <div class="w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-lg flex items-center justify-center shadow-lg">
                                <i class="fas fa-satellite text-white text-lg"></i>
                            </div>
                            <!-- Data Stream Lines -->
                            <div class="absolute top-1/2 left-1/2 w-1 h-8 bg-gradient-to-b from-green-400 to-transparent data-stream" style="transform-origin: top;"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Galileo Satellites -->
                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
                    <div class="satellite-orbit" style="animation-delay: -4s; animation-duration: 10s;">
                        <div class="relative">
                            <div class="w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg flex items-center justify-center shadow-lg">
                                <i class="fas fa-satellite-dish text-white text-lg"></i>
                            </div>
                            <!-- Data Stream Lines -->
                            <div class="absolute top-1/2 left-1/2 w-1 h-8 bg-gradient-to-b from-blue-400 to-transparent data-stream" style="transform-origin: top; animation-delay: 0.5s;"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Copernicus Satellites -->
                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
                    <div class="satellite-orbit" style="animation-delay: -8s; animation-duration: 14s;">
                        <div class="relative">
                            <div class="w-9 h-9 bg-gradient-to-br from-orange-400 to-orange-600 rounded-lg flex items-center justify-center shadow-lg">
                                <i class="fas fa-eye text-white"></i>
                            </div>
                            <!-- Data Stream Lines -->
                            <div class="absolute top-1/2 left-1/2 w-1 h-8 bg-gradient-to-b from-orange-400 to-transparent data-stream" style="transform-origin: top; animation-delay: 1s;"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Light Pulses -->
                <div class="absolute inset-0 w-48 h-48 -m-4 rounded-full light-pulse" style="background: radial-gradient(circle, rgba(0,255,0,0.1) 0%, transparent 70%);"></div>
            </div>
            
            <!-- Analysis Node Indicator -->
            <div class="absolute -bottom-8 left-1/2 -translate-x-1/2 w-16 h-16 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center pulse-green">
                <i class="fas fa-microchip text-black text-xl"></i>
            </div>
        </div>
        
        <h2 class="text-3xl md:text-4xl font-bold mb-6 text-center bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent">
            Analyzing Your Route
        </h2>
        
        <!-- Dynamic Status Messages -->
        <div class="text-center space-y-3 mb-8 min-h-[80px]">
            <p class="text-lg text-gray-300 font-medium flex items-center justify-center">
                <i class="fas fa-spinner fa-spin mr-3 cobalt-blue"></i>
                <span x-text="loadingText"></span>
            </p>
            <p class="text-sm text-gray-500">Processing EU Space Data...</p>
        </div>
        
        <!-- Progress Bar -->
        <div class="w-80 md:w-96 mb-3">
            <div class="h-3 bg-gray-800 rounded-full overflow-hidden relative">
                <div class="h-full progress-gradient transition-all duration-1000 ease-out relative" :style="'width: ' + loadingProgress + '%'">
                    <div class="absolute inset-0 bg-white/20 animate-pulse"></div>
                </div>
            </div>
        </div>
        
        <div class="flex items-center justify-between w-80 md:w-96 text-sm">
            <span class="text-gray-400" x-text="Math.round(loadingProgress) + '% Complete'"></span>
            <span class="text-green-400 font-semibold">
                <i class="fas fa-check-circle mr-1"></i>
                Secure Connection
            </span>
        </div>
        
        <!-- Data Source Indicators -->
        <div class="mt-8 flex flex-wrap gap-3 justify-center max-w-md">
            <div class="flex items-center space-x-2 bg-gray-900 px-3 py-2 rounded-lg border border-green-400/30">
                <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                <span class="text-xs text-gray-300">Galileo GNSS</span>
            </div>
            <div class="flex items-center space-x-2 bg-gray-900 px-3 py-2 rounded-lg border border-blue-400/30">
                <div class="w-2 h-2 bg-blue-400 rounded-full animate-pulse"></div>
                <span class="text-xs text-gray-300">Copernicus</span>
            </div>
            <div class="flex items-center space-x-2 bg-gray-900 px-3 py-2 rounded-lg border border-orange-400/30">
                <div class="w-2 h-2 bg-orange-400 rounded-full animate-pulse"></div>
                <span class="text-xs text-gray-300">EGNOS</span>
            </div>
        </div>
    </div>

    <!-- S12-S13. Results Dashboard & Route Comparison -->
    <div x-show="currentScreen === 'results'" class="min-h-screen bg-black p-4 md:p-6">
        <div class="max-w-6xl mx-auto pt-8">
            <div class="text-center mb-8">
                <h2 class="text-2xl md:text-3xl font-bold mb-4">Route Analysis Complete</h2>
                <p class="text-gray-400">Choose your perfect adventure path</p>
            </div>

            <!-- Score Gauges -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-gray-900 rounded-2xl p-6 text-center border border-green-400 glow-green">
                    <div class="relative w-24 h-24 mx-auto mb-4">
                        <canvas id="sustainabilityChart" width="96" height="96"></canvas>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span class="text-2xl font-bold neon-green">87</span>
                        </div>
                    </div>
                    <h3 class="text-lg font-semibold neon-green mb-2">Sustainability</h3>
                    <div class="flex items-center justify-center space-x-1">
                        <i class="fas fa-satellite-dish text-green-400 text-xs"></i>
                        <p class="text-xs text-gray-400">Copernicus LULC Verified</p>
                    </div>
                </div>

                <div class="bg-gray-900 rounded-2xl p-6 text-center border border-orange-400 glow-orange">
                    <div class="relative w-24 h-24 mx-auto mb-4">
                        <canvas id="safetyChart" width="96" height="96"></canvas>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span class="text-2xl font-bold text-orange-400">92</span>
                        </div>
                    </div>
                    <h3 class="text-lg font-semibold text-orange-400 mb-2">Safety</h3>
                    <div class="flex items-center justify-center space-x-1">
                        <i class="fas fa-satellite text-orange-400 text-xs"></i>
                        <p class="text-xs text-gray-400">Sentinel Risk Analysis</p>
                    </div>
                </div>

                <div class="bg-gray-900 rounded-2xl p-6 text-center border border-blue-400 glow-blue">
                    <div class="relative w-24 h-24 mx-auto mb-4">
                        <canvas id="accessibilityChart" width="96" height="96"></canvas>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span class="text-2xl font-bold cobalt-blue">78</span>
                        </div>
                    </div>
                    <h3 class="text-lg font-semibold cobalt-blue mb-2">Accessibility</h3>
                    <div class="flex items-center justify-center space-x-1">
                        <i class="fas fa-satellite text-blue-400 text-xs"></i>
                        <p class="text-xs text-gray-400">Galileo GNSS Verified</p>
                    </div>
                </div>
            </div>

            <!-- Route Options Map -->
            <div class="bg-gray-900 rounded-2xl p-6 mb-6">
                <h3 class="text-xl font-semibold mb-4">Route Options</h3>
                <div class="bg-gray-800 rounded-xl h-80 md:h-96 mb-4 relative overflow-hidden">
                    <svg class="absolute inset-0 w-full h-full">
                        <!-- The Green Path (Most Sustainable) -->
                        <path d="M50,300 Q150,200 250,250 T450,220" class="route-line" stroke="#00FF00" stroke-width="6" fill="none"/>
                        <!-- The Safe Route -->
                        <path d="M50,300 Q200,150 350,200 T450,180" class="route-line" stroke="#FFD700" stroke-width="6" fill="none"/>
                        <!-- The Fastest Route -->
                        <path d="M50,300 Q250,100 400,150 T450,140" class="route-line" stroke="#007FFF" stroke-width="6" fill="none"/>
                        <!-- The Balanced Route -->
                        <path d="M50,300 Q100,350 200,320 T450,280" class="route-line" stroke="#FFA500" stroke-width="6" fill="none"/>
                        
                        <circle cx="50" cy="300" r="10" fill="#00FF00"/>
                        <circle cx="450" cy="200" r="10" fill="#FF0000"/>
                    </svg>
                    
                    <!-- Route Legend -->
                    <div class="absolute top-4 right-4 bg-black/90 rounded-lg p-4 text-sm">
                        <div class="space-y-2">
                            <div class="flex items-center">
                                <div class="w-4 h-1 bg-green-400 mr-2"></div>
                                <span>Green Path (Most Sustainable)</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-4 h-1 bg-yellow-400 mr-2"></div>
                                <span>Safe Route (Most Secure)</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-4 h-1 bg-blue-400 mr-2"></div>
                                <span>Fastest Route</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-4 h-1 bg-orange-400 mr-2"></div>
                                <span>Balanced Route</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Route Details Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <!-- Green Path -->
                    <div @click="selectRoute('green')" 
                         :class="selectedRoute === 'green' ? 'bg-green-400/20 border-green-400 border-3 scale-105' : 'bg-gray-800 border-green-400'" 
                         class="rounded-xl p-4 border-2 cursor-pointer hover:bg-green-400/10 transition-all transform touch-feedback">
                        <div class="flex items-center justify-between mb-3">
                            <h4 class="font-semibold neon-green">Green Path</h4>
                            <div>
                                <i class="fas fa-leaf neon-green mr-2"></i>
                                <i x-show="selectedRoute === 'green'" class="fas fa-check-circle neon-green"></i>
                            </div>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-400">Distance:</span>
                                <span>12.4 km</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Duration:</span>
                                <span>4h 20m</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Elevation:</span>
                                <span>+420m</span>
                            </div>
                        </div>
                        <div class="mt-3 flex space-x-1">
                            <div class="flex-1 bg-green-400 h-1 rounded"></div>
                            <div class="flex-1 bg-green-400 h-1 rounded"></div>
                            <div class="flex-1 bg-green-400 h-1 rounded"></div>
                            <div class="flex-1 bg-green-400 h-1 rounded"></div>
                            <div class="flex-1 bg-green-400 h-1 rounded"></div>
                        </div>
                        <p class="text-xs text-green-400 mt-2">Sustainability: 95/100</p>
                    </div>

                    <!-- Safe Route -->
                    <div @click="selectRoute('safe')" 
                         :class="selectedRoute === 'safe' ? 'bg-yellow-400/20 border-yellow-400 border-3 scale-105' : 'bg-gray-800 border-yellow-400'" 
                         class="rounded-xl p-4 border-2 cursor-pointer hover:bg-yellow-400/10 transition-all transform touch-feedback">
                        <div class="flex items-center justify-between mb-3">
                            <h4 class="font-semibold text-yellow-400">Safe Route</h4>
                            <div>
                                <i class="fas fa-shield-alt text-yellow-400 mr-2"></i>
                                <i x-show="selectedRoute === 'safe'" class="fas fa-check-circle text-yellow-400"></i>
                            </div>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-400">Distance:</span>
                                <span>11.8 km</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Duration:</span>
                                <span>3h 45m</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Elevation:</span>
                                <span>+280m</span>
                            </div>
                        </div>
                        <div class="mt-3 flex space-x-1">
                            <div class="flex-1 bg-yellow-400 h-1 rounded"></div>
                            <div class="flex-1 bg-yellow-400 h-1 rounded"></div>
                            <div class="flex-1 bg-yellow-400 h-1 rounded"></div>
                            <div class="flex-1 bg-yellow-400 h-1 rounded"></div>
                            <div class="flex-1 bg-gray-600 h-1 rounded"></div>
                        </div>
                        <p class="text-xs text-yellow-400 mt-2">Safety: 98/100</p>
                    </div>

                    <!-- Fastest Route -->
                    <div @click="selectRoute('fastest')" 
                         :class="selectedRoute === 'fastest' ? 'bg-blue-400/20 border-blue-400 border-3 scale-105' : 'bg-gray-800 border-blue-400'" 
                         class="rounded-xl p-4 border-2 cursor-pointer hover:bg-blue-400/10 transition-all transform touch-feedback">
                        <div class="flex items-center justify-between mb-3">
                            <h4 class="font-semibold cobalt-blue">Fastest Route</h4>
                            <div>
                                <i class="fas fa-tachometer-alt cobalt-blue mr-2"></i>
                                <i x-show="selectedRoute === 'fastest'" class="fas fa-check-circle cobalt-blue"></i>
                            </div>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-400">Distance:</span>
                                <span>9.2 km</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Duration:</span>
                                <span>2h 50m</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Elevation:</span>
                                <span>+180m</span>
                            </div>
                        </div>
                        <div class="mt-3 flex space-x-1">
                            <div class="flex-1 bg-blue-400 h-1 rounded"></div>
                            <div class="flex-1 bg-blue-400 h-1 rounded"></div>
                            <div class="flex-1 bg-blue-400 h-1 rounded"></div>
                            <div class="flex-1 bg-gray-600 h-1 rounded"></div>
                            <div class="flex-1 bg-gray-600 h-1 rounded"></div>
                        </div>
                        <p class="text-xs text-blue-400 mt-2">Speed: 92/100</p>
                    </div>

                    <!-- Balanced Route -->
                    <div @click="selectRoute('balanced')" 
                         :class="selectedRoute === 'balanced' ? 'bg-orange-400/20 border-orange-400 border-3 scale-105' : 'bg-gray-800 border-orange-400'" 
                         class="rounded-xl p-4 border-2 cursor-pointer hover:bg-orange-400/10 transition-all transform touch-feedback">
                        <div class="flex items-center justify-between mb-3">
                            <h4 class="font-semibold text-orange-400">Balanced Route</h4>
                            <div>
                                <i class="fas fa-balance-scale text-orange-400 mr-2"></i>
                                <i x-show="selectedRoute === 'balanced'" class="fas fa-check-circle text-orange-400"></i>
                            </div>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-400">Distance:</span>
                                <span>10.6 km</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Duration:</span>
                                <span>3h 30m</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Elevation:</span>
                                <span>+320m</span>
                            </div>
                        </div>
                        <div class="mt-3 flex space-x-1">
                            <div class="flex-1 bg-orange-400 h-1 rounded"></div>
                            <div class="flex-1 bg-orange-400 h-1 rounded"></div>
                            <div class="flex-1 bg-orange-400 h-1 rounded"></div>
                            <div class="flex-1 bg-orange-400 h-1 rounded"></div>
                            <div class="flex-1 bg-gray-600 h-1 rounded"></div>
                        </div>
                        <p class="text-xs text-orange-400 mt-2">Overall: 85/100</p>
                    </div>
                </div>
            </div>

            <!-- Route Consequences Panel -->
            <div x-show="showRouteConsequences && routeConsequences" 
                 x-transition:enter="transition ease-out duration-300"
                 x-transition:enter-start="opacity-0 translate-y-4"
                 x-transition:enter-end="opacity-100 translate-y-0"
                 class="bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-6 mb-6 border-2"
                 :class="{
                     'border-green-400': routeConsequences?.color === 'green',
                     'border-yellow-400': routeConsequences?.color === 'yellow',
                     'border-blue-400': routeConsequences?.color === 'blue',
                     'border-orange-400': routeConsequences?.color === 'orange'
                 }">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-bold flex items-center">
                        <i class="fas fa-info-circle mr-3"
                           :class="{
                               'text-green-400': routeConsequences?.color === 'green',
                               'text-yellow-400': routeConsequences?.color === 'yellow',
                               'text-blue-400': routeConsequences?.color === 'blue',
                               'text-orange-400': routeConsequences?.color === 'orange'
                           }"></i>
                        <span x-text="'Route Analysis: ' + routeConsequences?.name"></span>
                    </h3>
                    <button @click="showRouteConsequences = false" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Pros -->
                    <div class="bg-green-900/20 rounded-xl p-4 border border-green-400/30">
                        <h4 class="font-semibold text-green-400 mb-3 flex items-center">
                            <i class="fas fa-check-circle mr-2"></i>
                            Benefits & Advantages
                        </h4>
                        <ul class="space-y-2 text-sm">
                            <template x-for="pro in routeConsequences?.pros" :key="pro">
                                <li class="flex items-start">
                                    <i class="fas fa-plus text-green-400 mr-2 mt-1 text-xs"></i>
                                    <span x-text="pro"></span>
                                </li>
                            </template>
                        </ul>
                    </div>

                    <!-- Cons -->
                    <div class="bg-red-900/20 rounded-xl p-4 border border-red-400/30">
                        <h4 class="font-semibold text-red-400 mb-3 flex items-center">
                            <i class="fas fa-exclamation-triangle mr-2"></i>
                            Challenges & Trade-offs
                        </h4>
                        <ul class="space-y-2 text-sm">
                            <template x-for="con in routeConsequences?.cons" :key="con">
                                <li class="flex items-start">
                                    <i class="fas fa-minus text-red-400 mr-2 mt-1 text-xs"></i>
                                    <span x-text="con"></span>
                                </li>
                            </template>
                        </ul>
                    </div>
                </div>

                <!-- Risk Assessment -->
                <div class="mt-4 bg-blue-900/20 rounded-xl p-4 border border-blue-400/30">
                    <h4 class="font-semibold text-blue-400 mb-2 flex items-center">
                        <i class="fas fa-shield-alt mr-2"></i>
                        Risk Assessment
                    </h4>
                    <p class="text-sm" x-text="routeConsequences?.risks"></p>
                </div>

                <!-- Active Alerts -->
                <div x-show="routeConsequences?.alerts && routeConsequences.alerts.length > 0" 
                     class="mt-4 bg-orange-900/20 rounded-xl p-4 border border-orange-400/30">
                    <h4 class="font-semibold text-orange-400 mb-2 flex items-center">
                        <i class="fas fa-bell mr-2"></i>
                        Active Alerts
                    </h4>
                    <ul class="space-y-1 text-sm">
                        <template x-for="alert in routeConsequences?.alerts" :key="alert">
                            <li x-text="alert" class="text-orange-300"></li>
                        </template>
                    </ul>
                </div>

                <!-- Comparison prompt -->
                <div class="mt-4 bg-gray-800/50 rounded-xl p-4 border border-gray-600">
                    <p class="text-sm text-gray-300">
                        <i class="fas fa-lightbulb text-yellow-400 mr-2"></i>
                        Want to compare? Click another route card to see alternative consequences.
                    </p>
                </div>
            </div>

            <div class="flex flex-col md:flex-row gap-4">
                <button @click="currentScreen = 'navigation'" class="flex-1 bg-gradient-to-r from-green-400 to-blue-500 text-black font-semibold py-4 rounded-xl hover:opacity-90 transition-all hover:scale-105 touch-feedback shadow-lg">
                    <i class="fas fa-play mr-2"></i>
                    Start Navigation
                </button>
                <button @click="showEmergencySettings = !showEmergencySettings" 
                        class="flex-1 bg-gray-800 border-2 border-red-500 text-white font-semibold py-4 rounded-xl hover:bg-red-900 hover:border-red-400 transition-all hover:scale-105 touch-feedback shadow-lg">
                    <i class="fas fa-ambulance mr-2"></i>
                    Emergency Settings
                </button>
            </div>
            
            <!-- Emergency Settings Panel -->
            <div x-show="showEmergencySettings" 
                 x-transition:enter="transition ease-out duration-300"
                 x-transition:enter-start="opacity-0 translate-y-4"
                 x-transition:enter-end="opacity-100 translate-y-0"
                 class="mt-6 bg-gradient-to-br from-red-900/90 to-gray-900 rounded-2xl p-6 border-2 border-red-500 glow-red">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-bold text-red-400 flex items-center">
                        <i class="fas fa-first-aid mr-3"></i>
                        Emergency & SAR Configuration
                    </h3>
                    <button @click="showEmergencySettings = false" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-black/40 rounded-xl p-4 border border-red-400/30">
                        <h4 class="font-semibold text-red-300 mb-3 flex items-center">
                            <i class="fas fa-phone-alt mr-2"></i>
                            Emergency Contacts
                        </h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-center justify-between p-2 bg-gray-800 rounded">
                                <span>Mountain Rescue:</span>
                                <span class="text-red-400 font-bold">112</span>
                            </div>
                            <div class="flex items-center justify-between p-2 bg-gray-800 rounded">
                                <span>Emergency SAR:</span>
                                <span class="text-red-400 font-bold">+1-555-RESCUE</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-black/40 rounded-xl p-4 border border-yellow-400/30">
                        <h4 class="font-semibold text-yellow-300 mb-3 flex items-center">
                            <i class="fas fa-satellite-dish mr-2"></i>
                            Tracking Options
                        </h4>
                        <div class="space-y-2 text-sm">
                            <label class="flex items-center justify-between p-2 bg-gray-800 rounded cursor-pointer hover:bg-gray-700">
                                <span>Share Live Location</span>
                                <input type="checkbox" checked class="form-checkbox text-green-500">
                            </label>
                            <label class="flex items-center justify-between p-2 bg-gray-800 rounded cursor-pointer hover:bg-gray-700">
                                <span>Auto-Alert on Deviation</span>
                                <input type="checkbox" checked class="form-checkbox text-yellow-500">
                            </label>
                        </div>
                    </div>
                </div>
                
                <button class="w-full mt-4 bg-red-600 hover:bg-red-500 text-white font-bold py-3 rounded-xl transition-all touch-feedback">
                    <i class="fas fa-save mr-2"></i>
                    Save Emergency Settings
                </button>
            </div>
        </div>
    </div>

    <!-- S15-S19. Navigation & Alerts -->
    <div x-show="currentScreen === 'navigation'" class="min-h-screen bg-white relative">
        <!-- Google Maps-Style Navigation Map -->
        <div class="h-screen bg-gray-100 relative overflow-hidden">
            <!-- Map Background -->
            <svg class="absolute inset-0 w-full h-full" viewBox="0 0 600 800" preserveAspectRatio="xMidYMid slice">
                <defs>
                    <!-- Google Maps gradients -->
                    <linearGradient id="navParkGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#c8e6c9;stop-opacity:1"/>
                        <stop offset="100%" style="stop-color:#81c784;stop-opacity:1"/>
                    </linearGradient>
                    <filter id="navShadow">
                        <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
                        <feOffset dx="0" dy="2" result="offsetblur"/>
                        <feComponentTransfer>
                            <feFuncA type="linear" slope="0.3"/>
                        </feComponentTransfer>
                        <feMerge>
                            <feMergeNode/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>
                
                <!-- Base terrain -->
                <rect width="600" height="800" fill="#f5f5f5"/>
                
                <!-- Parks and green spaces -->
                <ellipse cx="150" cy="600" rx="100" ry="80" fill="url(#navParkGradient)" opacity="0.8"/>
                <ellipse cx="450" cy="500" rx="120" ry="90" fill="url(#navParkGradient)" opacity="0.8"/>
                
                <!-- Buildings/urban areas -->
                <g fill="#e0e0e0" stroke="#bdbdbd" stroke-width="1">
                    <rect x="50" y="250" width="40" height="50" rx="2"/>
                    <rect x="100" y="230" width="35" height="70" rx="2"/>
                    <rect x="145" y="240" width="45" height="60" rx="2"/>
                    <rect x="400" y="300" width="50" height="60" rx="2"/>
                    <rect x="460" y="320" width="40" height="50" rx="2"/>
                </g>
                
                <!-- Roads (Google Maps style) -->
                <g>
                    <!-- Main highway -->
                    <path d="M0,400 Q150,390 300,400 Q450,410 600,400" 
                          stroke="#ffffff" stroke-width="20" fill="none" filter="url(#navShadow)"/>
                    <path d="M0,400 Q150,390 300,400 Q450,410 600,400" 
                          stroke="#ffa726" stroke-width="16" fill="none"/>
                    <path d="M0,400 Q150,390 300,400 Q450,410 600,400" 
                          stroke="#ffffff" stroke-width="2" stroke-dasharray="20,15" fill="none"/>
                    
                    <!-- Secondary roads -->
                    <path d="M300,200 L300,800" stroke="#ffffff" stroke-width="14" fill="none"/>
                    <path d="M300,200 L300,800" stroke="#e0e0e0" stroke-width="12" fill="none"/>
                    
                    <path d="M100,100 Q200,300 250,500" stroke="#ffffff" stroke-width="12" fill="none"/>
                    <path d="M100,100 Q200,300 250,500" stroke="#e0e0e0" stroke-width="10" fill="none"/>
                </g>
                
                <!-- Active route path (Google Maps blue) -->
                <path d="M250,520 Q280,480 310,450 Q340,420 370,400 Q400,380 430,370" 
                      class="route-line" 
                      stroke="#1976d2" 
                      stroke-width="10" 
                      fill="none"
                      filter="url(#navShadow)"/>
                
                <!-- Current position indicator (pulsing blue dot) -->
                <g>
                    <circle cx="250" cy="520" r="30" fill="#1976d2" opacity="0.2" class="animate-pulse"/>
                    <circle cx="250" cy="520" r="18" fill="#ffffff" stroke="#1976d2" stroke-width="4">
                        <animate attributeName="r" values="18;22;18" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="250" cy="520" r="10" fill="#1976d2"/>
                    <!-- Direction arrow -->
                    <path d="M250,510 L255,518 L245,518 Z" fill="#ffffff"/>
                </g>
                
                <!-- Waypoint markers -->
                <g>
                    <circle cx="310" cy="450" r="12" fill="#ff6f00" stroke="#ffffff" stroke-width="3"/>
                    <circle cx="370" cy="400" r="12" fill="#ff6f00" stroke="#ffffff" stroke-width="3"/>
                    <circle cx="430" cy="370" r="16" fill="#d32f2f" stroke="#ffffff" stroke-width="4"/>
                    <text x="430" y="375" text-anchor="middle" fill="#ffffff" font-size="12" font-weight="bold">B</text>
                </g>
                
                <!-- Map labels -->
                <text x="150" y="630" text-anchor="middle" fill="#2d5016" font-size="12" font-weight="600">Forest Park</text>
                <text x="450" y="530" text-anchor="middle" fill="#2d5016" font-size="12" font-weight="600">Nature Trail</text>
            </svg>

            <!-- Google Maps-Style Top Bar -->
            <div class="absolute top-0 left-0 right-0 bg-white shadow-xl p-3 z-40 slide-in-bounce">
                <div class="flex items-center justify-between">
                    <!-- Route info card -->
                    <div class="flex items-center space-x-3 bg-white rounded-xl shadow-lg p-3 border-2 border-blue-500 glass">
                        <div class="flex flex-col">
                            <div class="flex items-center space-x-2 mb-1">
                                <i class="fas fa-route text-blue-600"></i>
                                <span class="font-bold text-gray-900 text-xl">2h 45m</span>
                                <span class="text-gray-600 text-sm">(12.4 km)</span>
                            </div>
                            <div class="text-xs text-green-600 font-medium">‚ö° Fastest ‚Ä¢ 420m elevation</div>
                        </div>
                    </div>
                    
                    <!-- Status indicators -->
                    <div class="flex items-center space-x-2">
                        <div class="flex items-center space-x-2 bg-green-50 px-3 py-2 rounded-lg border-2 border-green-400 neon-pulse">
                            <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                            <span class="text-xs font-bold text-green-700">Galileo</span>
                        </div>
                        <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-bold transition-all shadow-lg hover:scale-105">
                            <i class="fas fa-cog mr-1"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Google Maps-Style Navigation Instructions -->
            <div class="absolute top-20 left-4 right-4 bg-white rounded-2xl shadow-2xl p-5 border-2 border-gray-200 pop-in">
                <div class="flex items-center space-x-4">
                    <!-- Direction arrow icon -->
                    <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg neon-pulse">
                        <i class="fas fa-arrow-up text-white text-2xl"></i>
                    </div>
                    <div class="flex-1">
                        <p class="text-xl font-bold text-gray-900 mb-1">Continue straight</p>
                        <p class="text-sm text-gray-600">for <span class="font-semibold text-blue-600">1.2 km</span></p>
                        <div class="flex items-center space-x-3 mt-2">
                            <div class="flex items-center space-x-1">
                                <i class="fas fa-tachometer-alt text-green-600 text-xs"></i>
                                <span class="text-xs text-gray-600">4.2 km/h</span>
                            </div>
                            <div class="flex items-center space-x-1">
                                <i class="fas fa-mountain text-orange-500 text-xs"></i>
                                <span class="text-xs text-gray-600">+45m</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Critical Safety Alert Modal with Shake & Haptic -->
            <div x-show="showCriticalAlert" 
                 x-transition:enter="transition ease-out duration-300"
                 x-transition:enter-start="opacity-0 scale-90"
                 x-transition:enter-end="opacity-100 scale-100"
                 class="absolute inset-0 bg-red-600/95 modal-backdrop flex items-center justify-center z-50 pulse-red">
                <div class="bg-black rounded-2xl p-8 mx-4 text-center max-w-md border-4 border-red-500 shake glow-red">
                    <div class="w-20 h-20 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-6 animate-bounce pulse-red">
                        <i class="fas fa-exclamation-triangle text-white text-3xl"></i>
                    </div>
                    
                    <div class="mb-6">
                        <h3 class="text-3xl font-black text-red-400 mb-3 uppercase tracking-wide">
                            ‚ö†Ô∏è CRITICAL WARNING ‚ö†Ô∏è
                        </h3>
                        <div class="h-1 w-full bg-gradient-to-r from-transparent via-red-500 to-transparent mb-4"></div>
                    </div>
                    
                    <div class="bg-red-900/40 rounded-xl p-4 mb-6 border border-red-500/50">
                        <p class="text-white text-lg font-semibold mb-2">
                            üåä Flash Flood Risk Ahead
                        </p>
                        <p class="text-red-200 text-sm">
                            Real-time Copernicus Sentinel data indicates dangerous conditions
                        </p>
                    </div>
                    
                    <div class="space-y-3">
                        <button @click="showCriticalAlert = false; triggerHaptic()" 
                                class="w-full bg-red-500 text-white font-bold py-4 rounded-xl hover:bg-red-600 transition-all transform hover:scale-105 touch-feedback shadow-lg">
                            <i class="fas fa-route mr-2"></i>
                            Route to Safety Now
                        </button>
                        <button @click="showCriticalAlert = false" 
                                class="w-full bg-gray-800 text-gray-300 font-semibold py-3 rounded-xl hover:bg-gray-700 transition-colors touch-feedback border border-gray-600">
                            I Understand the Risk
                        </button>
                    </div>
                    
                    <p class="text-xs text-gray-400 mt-4">
                        <i class="fas fa-shield-alt mr-1"></i>
                        Alert validated by Copernicus Emergency Management
                    </p>
                </div>
            </div>

            <!-- LULC Layer Overlay -->
            <div x-show="showLULCLayer"
                 x-transition:enter="transition ease-out duration-500"
                 x-transition:enter-start="opacity-0"
                 x-transition:enter-end="opacity-100"
                 class="absolute inset-0 pointer-events-none z-30">
                <svg class="w-full h-full" viewBox="0 0 500 400" preserveAspectRatio="xMidYMid meet">
                    <!-- Copernicus Land Use/Land Cover Layer -->
                    <defs>
                        <pattern id="forest-pattern" x="0" y="0" width="10" height="10" patternUnits="userSpaceOnUse">
                            <circle cx="5" cy="5" r="2" fill="#2d5016" opacity="0.8"/>
                        </pattern>
                        <pattern id="grassland-pattern" x="0" y="0" width="8" height="8" patternUnits="userSpaceOnUse">
                            <line x1="0" y1="4" x2="8" y2="4" stroke="#4ade80" stroke-width="0.5"/>
                        </pattern>
                        <pattern id="urban-pattern" x="0" y="0" width="12" height="12" patternUnits="userSpaceOnUse">
                            <rect x="0" y="0" width="5" height="5" fill="#6b7280"/>
                            <rect x="7" y="7" width="5" height="5" fill="#6b7280"/>
                        </pattern>
                    </defs>
                    
                    <!-- Forest areas (dark green) -->
                    <ellipse cx="100" cy="300" rx="80" ry="60" fill="url(#forest-pattern)" opacity="0.7">
                        <animate attributeName="opacity" values="0.7;0.85;0.7" dur="3s" repeatCount="indefinite"/>
                    </ellipse>
                    <text x="100" y="300" text-anchor="middle" fill="#4ade80" font-size="8" font-weight="bold">Dense Forest</text>
                    
                    <!-- Grassland (light green) -->
                    <ellipse cx="250" cy="320" rx="100" ry="70" fill="url(#grassland-pattern)" opacity="0.6">
                        <animate attributeName="opacity" values="0.6;0.75;0.6" dur="3s" repeatCount="indefinite"/>
                    </ellipse>
                    <text x="250" y="325" text-anchor="middle" fill="#86efac" font-size="8" font-weight="bold">Managed Grassland</text>
                    
                    <!-- Alpine/Rocky (gray) -->
                    <path d="M200,80 L280,60 L340,90 L300,120 L220,110 Z" fill="#9ca3af" opacity="0.7">
                        <animate attributeName="opacity" values="0.7;0.85;0.7" dur="3s" repeatCount="indefinite"/>
                    </path>
                    <text x="270" y="95" text-anchor="middle" fill="#f3f4f6" font-size="8" font-weight="bold">Alpine Rock</text>
                    
                    <!-- Wetland (blue) -->
                    <circle cx="150" cy="150" r="30" fill="#3b82f6" opacity="0.6">
                        <animate attributeName="opacity" values="0.6;0.75;0.6" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="150" y="155" text-anchor="middle" fill="#dbeafe" font-size="8" font-weight="bold">Wetland</text>
                    
                    <!-- Legend -->
                    <g transform="translate(10, 10)">
                        <rect width="140" height="120" rx="8" fill="#000000" opacity="0.85" stroke="#00ff00" stroke-width="2"/>
                        <text x="70" y="15" text-anchor="middle" fill="#00ff00" font-size="10" font-weight="bold">LULC DATA LAYER</text>
                        <text x="10" y="30" fill="#4ade80" font-size="8">üå≤ Dense Forest - Protected</text>
                        <text x="10" y="45" fill="#86efac" font-size="8">üåæ Grassland - Managed</text>
                        <text x="10" y="60" fill="#9ca3af" font-size="8">‚õ∞Ô∏è Alpine Rock - Fragile</text>
                        <text x="10" y="75" fill="#3b82f6" font-size="8">üíß Wetland - Critical</text>
                        <text x="10" y="95" fill="#fbbf24" font-size="7">Source: Copernicus</text>
                        <text x="10" y="107" fill="#fbbf24" font-size="7">Land Monitoring Service</text>
                    </g>
                </svg>
            </div>

            <!-- Sustainability Alert (Soft Warning) -->
            <div x-show="showSustainabilityAlert"
                 x-transition:enter="transition ease-out duration-300 transform"
                 x-transition:enter-start="opacity-0 -translate-y-4"
                 x-transition:enter-end="opacity-100 translate-y-0"
                 x-transition:leave="transition ease-in duration-200 transform"
                 x-transition:leave-start="opacity-100 translate-y-0"
                 x-transition:leave-end="opacity-0 -translate-y-4"
                 class="absolute top-24 left-4 right-4 z-40">
                <div class="bg-gradient-to-r from-orange-500/95 to-green-500/95 backdrop-blur-sm rounded-2xl p-4 border-2 border-orange-400 shadow-2xl glow-orange">
                    <div class="flex items-start justify-between">
                        <div class="flex items-center space-x-3 flex-1">
                            <div class="w-12 h-12 bg-green-400 rounded-full flex items-center justify-center flex-shrink-0 pulse-green">
                                <i class="fas fa-leaf text-black text-xl"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-bold text-white text-lg mb-1">Protected Habitat Area</p>
                                <p class="text-sm text-white/90">
                                    <i class="fas fa-satellite-dish mr-1"></i>
                                    Approaching Copernicus LULC verified zone
                                </p>
                            </div>
                        </div>
                        <button @click="showSustainabilityAlert = false" 
                                class="text-white hover:text-gray-200 ml-2 touch-feedback">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    <div class="mt-3 flex gap-2">
                        <button @click="showSustainabilityAlert = false" 
                                class="flex-1 bg-white/20 backdrop-blur-sm text-white font-semibold py-2 px-3 rounded-lg text-sm hover:bg-white/30 transition-colors touch-feedback">
                            <i class="fas fa-check mr-1"></i>
                            Acknowledge
                        </button>
                        <button @click="showLULCLayer = !showLULCLayer" 
                                class="flex-1 font-semibold py-2 px-3 rounded-lg text-sm transition-colors touch-feedback"
                                :class="showLULCLayer ? 'bg-green-500 text-white' : 'bg-green-600 text-white hover:bg-green-700'">
                            <i class="fas fa-map mr-1"></i>
                            <span x-text="showLULCLayer ? 'Hide LULC Layer' : 'View LULC Layer'"></span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Bottom Stats Panel -->
            <div class="absolute bottom-20 left-4 right-4 bg-black/90 rounded-xl p-4">
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div>
                        <p class="text-2xl font-bold neon-green">8.2</p>
                        <p class="text-xs text-gray-400">km remaining</p>
                    </div>
                    <div>
                        <p class="text-2xl font-bold text-orange-400">420</p>
                        <p class="text-xs text-gray-400">elevation gain</p>
                    </div>
                    <div>
                        <p class="text-2xl font-bold cobalt-blue">94%</p>
                        <p class="text-xs text-gray-400">route accuracy</p>
                    </div>
                </div>
            </div>

            <!-- SOS Emergency Button (Always Visible) -->
            <div class="absolute bottom-6 right-6 z-40">
                <button @click="showSOSModal = true" 
                        class="w-20 h-20 bg-gradient-to-br from-red-500 to-red-700 rounded-full flex items-center justify-center floating-btn pulse-red shadow-2xl border-4 border-white touch-feedback"
                        style="box-shadow: 0 0 40px rgba(255, 0, 0, 0.6);">
                    <div class="text-center">
                        <i class="fas fa-sos text-white text-2xl mb-1"></i>
                    </div>
                </button>
            </div>

            <!-- SOS Modal with Enhanced UI -->
            <div x-show="showSOSModal"
                 x-transition:enter="transition ease-out duration-300"
                 x-transition:enter-start="opacity-0 scale-90"
                 x-transition:enter-end="opacity-100 scale-100"
                 class="absolute inset-0 bg-black/95 modal-backdrop flex items-center justify-center z-50">
                <div class="bg-gray-900 rounded-3xl p-8 mx-4 text-center max-w-md border-4 border-red-500 glow-red">
                    <div class="w-24 h-24 bg-gradient-to-br from-red-500 to-red-700 rounded-full flex items-center justify-center mx-auto mb-6 pulse-red shadow-2xl">
                        <i class="fas fa-sos text-white text-3xl"></i>
                    </div>
                    
                    <h3 class="text-3xl font-black text-red-400 mb-4 uppercase tracking-wide">
                        üÜò Emergency SOS
                    </h3>
                    
                    <div class="bg-red-900/30 rounded-2xl p-4 mb-6 border border-red-500/50">
                        <p class="text-white text-lg mb-3 font-semibold">
                            Hold button for 3 seconds to activate
                        </p>
                        <p class="text-gray-300 text-sm">
                            Sends distress signal with precise Galileo SAR coordinates to emergency services
                        </p>
                    </div>
                    
                    <!-- Hold to Activate Button -->
                    <div class="space-y-3 mb-6">
                        <button @mousedown="startSOSHold()" 
                                @mouseup="cancelSOSHold()" 
                                @touchstart="startSOSHold()" 
                                @touchend="cancelSOSHold()"
                                class="relative w-full bg-gradient-to-r from-red-500 to-red-700 text-white font-bold py-6 rounded-2xl hover:from-red-600 hover:to-red-800 transition-all shadow-2xl overflow-hidden touch-feedback">
                            <div class="relative z-10 flex items-center justify-center">
                                <i class="fas fa-hand-paper mr-3 text-2xl"></i>
                                <span class="text-xl">Hold to Send SOS</span>
                            </div>
                            <!-- Progress Bar -->
                            <div x-show="sosHoldProgress > 0" 
                                 class="absolute bottom-0 left-0 h-2 bg-white/50 transition-all duration-100"
                                 :style="'width: ' + sosHoldProgress + '%'"></div>
                        </button>
                        
                        <button @click="showSOSModal = false" 
                                class="w-full bg-gray-800 text-gray-300 font-semibold py-4 rounded-xl hover:bg-gray-700 transition-colors border border-gray-600 touch-feedback">
                            Cancel
                        </button>
                    </div>
                    
                    <!-- Communication Methods -->
                    <div class="bg-gray-800 rounded-xl p-4 mb-4">
                        <p class="text-xs text-gray-400 mb-3">Emergency Communication:</p>
                        <div class="grid grid-cols-2 gap-2 text-xs">
                            <div class="flex items-center space-x-2">
                                <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                                <span class="text-gray-300">Galileo SAR</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-2 h-2 bg-blue-400 rounded-full"></div>
                                <span class="text-gray-300">IRIS2/GOVSATCOM</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-2 h-2 bg-orange-400 rounded-full"></div>
                                <span class="text-gray-300">Cellular Network</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-2 h-2 bg-purple-400 rounded-full"></div>
                                <span class="text-gray-300">Satellite Backup</span>
                            </div>
                        </div>
                    </div>
                    
                    <p class="text-xs text-gray-500">
                        <i class="fas fa-shield-alt mr-1"></i>
                        Backup transmission via IRIS2/GOVSATCOM if cellular unavailable
                    </p>
                </div>
            </div>

            <!-- End Navigation Button -->
            <div class="absolute bottom-4 left-4">
                <button @click="currentScreen = 'leagues'" class="bg-gray-800/90 text-white px-6 py-3 rounded-xl font-semibold hover:bg-gray-700 transition-colors">
                    End Navigation
                </button>
            </div>
        </div>
    </div>

    <!-- S25-S29. EcoRover Space Leagues -->
    <div x-show="currentScreen === 'leagues'" class="min-h-screen bg-black p-4 md:p-6 relative overflow-hidden">
        <!-- Animated Background -->
        <div class="absolute inset-0 overflow-hidden pointer-events-none">
            <div class="absolute top-10 left-10 w-64 h-64 bg-green-500/10 rounded-full blur-3xl animate-pulse"></div>
            <div class="absolute bottom-20 right-20 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
        </div>
        
        <div class="max-w-6xl mx-auto pt-8 relative z-10">
            <div class="text-center mb-8">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent shimmer">EcoRover Space Leagues</h2>
                <p class="text-gray-400">Compete with explorers worldwide</p>
            </div>
            
            <!-- Animated EcoRover Character -->
            <div x-show="showEcoRoverCharacter" 
                 class="fixed bottom-8 right-8 z-50 character-jump"
                 x-init="setTimeout(() => showEcoRoverCharacter = true, 800)">
                <div class="relative floating-character">
                    <!-- Character speech bubble -->
                    <div class="absolute -top-32 -left-32 bg-gradient-to-r from-green-400 to-blue-500 rounded-2xl p-4 shadow-2xl border-4 border-white max-w-xs pop-in"
                         style="animation-delay: 1.8s;">
                        <div class="relative">
                            <p class="text-black font-bold text-sm mb-1">üéâ Congratulations!</p>
                            <p class="text-black text-xs">You've earned <span class="font-bold">+250 points</span> in The Copernicus Guardians!</p>
                            <div class="absolute -bottom-3 right-8 w-6 h-6 bg-gradient-to-r from-green-400 to-blue-500 transform rotate-45"></div>
                        </div>
                    </div>
                    
                    <!-- EcoRover Character (Robot/Mascot) -->
                    <div class="relative w-32 h-32">
                        <!-- Robot body -->
                        <div class="absolute inset-0 bg-gradient-to-br from-green-400 to-blue-500 rounded-3xl shadow-2xl neon-pulse">
                            <!-- Robot face -->
                            <div class="absolute top-4 left-1/2 transform -translate-x-1/2">
                                <!-- Eyes -->
                                <div class="flex space-x-4 mb-2">
                                    <div class="w-4 h-4 bg-white rounded-full animate-pulse"></div>
                                    <div class="w-4 h-4 bg-white rounded-full animate-pulse" style="animation-delay: 0.1s;"></div>
                                </div>
                                <!-- Smile -->
                                <div class="w-12 h-6 border-b-4 border-white rounded-full"></div>
                            </div>
                            
                            <!-- Antenna -->
                            <div class="absolute -top-8 left-1/2 transform -translate-x-1/2">
                                <div class="w-1 h-6 bg-yellow-400"></div>
                                <div class="w-4 h-4 bg-yellow-400 rounded-full animate-ping absolute -top-4 left-1/2 transform -translate-x-1/2"></div>
                            </div>
                            
                            <!-- Arms -->
                            <div class="absolute top-12 -left-6 w-6 h-3 bg-green-500 rounded-full transform rotate-45"></div>
                            <div class="absolute top-12 -right-6 w-6 h-3 bg-blue-500 rounded-full transform -rotate-45"></div>
                            
                            <!-- Badge -->
                            <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 text-center">
                                <div class="text-white font-bold text-xl">üèÜ</div>
                            </div>
                        </div>
                        
                        <!-- Sparkles around character -->
                        <div class="absolute -top-2 -left-2 text-yellow-400 text-2xl animate-ping">‚ú®</div>
                        <div class="absolute -top-4 -right-4 text-yellow-400 text-xl animate-ping" style="animation-delay: 0.3s;">‚≠ê</div>
                        <div class="absolute -bottom-2 -left-4 text-yellow-400 text-xl animate-ping" style="animation-delay: 0.6s;">üí´</div>
                        <div class="absolute -bottom-4 -right-2 text-yellow-400 text-2xl animate-ping" style="animation-delay: 0.9s;">‚ú®</div>
                    </div>
                </div>
            </div>

            <!-- Current Stats -->
            <div class="bg-gray-900 rounded-2xl p-6 mb-8 border border-green-400 glow-green glass slide-in-bounce">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 text-center">
                    <div class="pop-in">
                        <p class="text-3xl font-bold neon-green">1,247</p>
                        <p class="text-sm text-gray-400">Weekly Score</p>
                    </div>
                    <div class="pop-in" style="animation-delay: 0.1s;">
                        <p class="text-3xl font-bold cobalt-blue">#23</p>
                        <p class="text-sm text-gray-400">Global Rank</p>
                    </div>
                    <div class="pop-in" style="animation-delay: 0.2s;">
                        <p class="text-3xl font-bold text-yellow-400">Earth Guardian</p>
                        <p class="text-sm text-gray-400">Current Tier</p>
                    </div>
                    <div class="pop-in" style="animation-delay: 0.3s;">
                        <p class="text-3xl font-bold text-orange-400">89%</p>
                        <p class="text-sm text-gray-400">To Ambassador</p>
                    </div>
                </div>
            </div>

            <!-- The Triple-League Challenge -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <!-- The Sentinel Order -->
                <div class="bg-gray-900 rounded-2xl p-6 border border-green-400 card-3d glass hover:border-green-300 transition-all">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-green-400 rounded-full flex items-center justify-center mx-auto mb-4 neon-pulse">
                            <i class="fas fa-leaf text-black text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold neon-green mb-2">The Sentinel Order</h3>
                        <p class="text-sm text-gray-400">Environmental Purity Focus</p>
                    </div>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between bg-gray-800 rounded-lg p-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-black font-bold text-sm">1</div>
                                <span class="font-semibold">EcoMaster_2024</span>
                            </div>
                            <span class="neon-green font-bold">2,847</span>
                        </div>
                        <div class="flex items-center justify-between bg-gray-800 rounded-lg p-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center text-black font-bold text-sm">2</div>
                                <span class="font-semibold">GreenTrail_Pro</span>
                            </div>
                            <span class="neon-green font-bold">2,634</span>
                        </div>
                        <div class="flex items-center justify-between bg-gray-800 rounded-lg p-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-orange-400 rounded-full flex items-center justify-center text-black font-bold text-sm">3</div>
                                <span class="font-semibold">NatureGuard</span>
                            </div>
                            <span class="neon-green font-bold">2,401</span>
                        </div>
                        <div class="border-t border-gray-700 pt-3">
                            <div class="flex items-center justify-between bg-blue-900/30 rounded-lg p-3">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-400 rounded-full flex items-center justify-center text-black font-bold text-sm">8</div>
                                    <span class="font-semibold">You</span>
                                </div>
                                <span class="neon-green font-bold">1,847</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- The Galileo Navigators -->
                <div class="bg-gray-900 rounded-2xl p-6 border border-blue-400">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-blue-400 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-satellite text-white text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold cobalt-blue mb-2">The Galileo Navigators</h3>
                        <p class="text-sm text-gray-400">Total Distance Focus</p>
                    </div>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between bg-gray-800 rounded-lg p-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-black font-bold text-sm">1</div>
                                <span class="font-semibold">PathMaster_X</span>
                            </div>
                            <span class="cobalt-blue font-bold">847 km</span>
                        </div>
                        <div class="flex items-center justify-between bg-gray-800 rounded-lg p-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center text-black font-bold text-sm">2</div>
                                <span class="font-semibold">WanderLust</span>
                            </div>
                            <span class="cobalt-blue font-bold">723 km</span>
                        </div>
                        <div class="flex items-center justify-between bg-gray-800 rounded-lg p-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-orange-400 rounded-full flex items-center justify-center text-black font-bold text-sm">3</div>
                                <span class="font-semibold">TrailBlazer</span>
                            </div>
                            <span class="cobalt-blue font-bold">689 km</span>
                        </div>
                        <div class="border-t border-gray-700 pt-3">
                            <div class="flex items-center justify-between bg-blue-900/30 rounded-lg p-3">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-400 rounded-full flex items-center justify-center text-black font-bold text-sm">15</div>
                                    <span class="font-semibold">You</span>
                                </div>
                                <span class="cobalt-blue font-bold">234 km</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- The Terra Scouts -->
                <div class="bg-gray-900 rounded-2xl p-6 border border-orange-400">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-orange-400 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-mountain text-white text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-orange-400 mb-2">The Terra Scouts</h3>
                        <p class="text-sm text-gray-400">Natural Areas Focus</p>
                    </div>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between bg-gray-800 rounded-lg p-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-black font-bold text-sm">1</div>
                                <span class="font-semibold">WildExplorer</span>
                            </div>
                            <span class="text-orange-400 font-bold">156h</span>
                        </div>
                        <div class="flex items-center justify-between bg-gray-800 rounded-lg p-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center text-black font-bold text-sm">2</div>
                                <span class="font-semibold">NatureLover</span>
                            </div>
                            <span class="text-orange-400 font-bold">134h</span>
                        </div>
                        <div class="flex items-center justify-between bg-gray-800 rounded-lg p-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-orange-400 rounded-full flex items-center justify-center text-black font-bold text-sm">3</div>
                                <span class="font-semibold">OutdoorPro</span>
                            </div>
                            <span class="text-orange-400 font-bold">127h</span>
                        </div>
                        <div class="border-t border-gray-700 pt-3">
                            <div class="flex items-center justify-between bg-blue-900/30 rounded-lg p-3">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-400 rounded-full flex items-center justify-center text-black font-bold text-sm">12</div>
                                    <span class="font-semibold">You</span>
                                </div>
                                <span class="text-orange-400 font-bold">67h</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- The Ascension Ladder -->
            <div class="bg-gray-900 rounded-2xl p-6 mb-8">
                <h3 class="text-2xl font-bold text-center mb-6">The Ascension Ladder</h3>
                <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-8">
                    <div class="text-center opacity-50">
                        <div class="w-16 h-16 bg-gray-600 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-seedling text-white"></i>
                        </div>
                        <p class="text-sm">Pioneers</p>
                    </div>
                    <div class="text-center opacity-50">
                        <div class="w-16 h-16 bg-gray-600 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-hiking text-white"></i>
                        </div>
                        <p class="text-sm">Trailblazers</p>
                    </div>
                    <div class="text-center opacity-50">
                        <div class="w-16 h-16 bg-gray-600 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-compass text-white"></i>
                        </div>
                        <p class="text-sm">Pathfinders</p>
                    </div>
                    <div class="text-center">
                        <div class="w-20 h-20 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-2 glow-green">
                            <i class="fas fa-shield-alt text-white text-xl"></i>
                        </div>
                        <p class="text-sm font-bold text-yellow-400">Earth Guardians</p>
                        <p class="text-xs text-gray-400">Current Tier</p>
                    </div>
                    <div class="text-center opacity-75">
                        <div class="w-16 h-16 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-crown text-white"></i>
                        </div>
                        <p class="text-sm">Ambassadors of Space</p>
                        <div class="w-full bg-gray-700 rounded-full h-2 mt-2">
                            <div class="bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full" style="width: 89%"></div>
                        </div>
                        <p class="text-xs text-gray-400 mt-1">89% Complete</p>
                    </div>
                </div>
            </div>

            <!-- Rewards Section with Holographic Effect -->
            <div class="bg-gray-900 rounded-2xl p-6 border-2 border-yellow-400 glow-orange holographic">
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-3">
                        <i class="fas fa-trophy text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-yellow-400">Special Rewards & Badges</h3>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Monthly Prize -->
                    <div class="bg-gradient-to-br from-green-900/50 to-gray-800 rounded-2xl p-6 border-2 border-green-400 glow-green">
                        <div class="flex items-center space-x-4 mb-4">
                            <div class="w-14 h-14 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center flex-shrink-0 badge-shine">
                                <i class="fas fa-satellite text-white text-xl"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-lg neon-green">Sentinel Sustainability Ambassador</h4>
                                <p class="text-xs text-gray-400">üèÜ Monthly Sentinel Order Winner Prize</p>
                            </div>
                        </div>
                        <div class="bg-black/40 rounded-xl p-4 border border-green-400/30">
                            <p class="text-sm text-gray-300 mb-2">
                                <i class="fas fa-star text-yellow-400 mr-2"></i>
                                Exclusive Benefits:
                            </p>
                            <ul class="text-sm text-gray-300 space-y-1 ml-4">
                                <li>‚Ä¢ One month of high-resolution Copernicus data access</li>
                                <li>‚Ä¢ Priority route calculations</li>
                                <li>‚Ä¢ Permanent profile badge</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Recent Badges -->
                    <div class="bg-gray-800 rounded-2xl p-6 border border-purple-400">
                        <h4 class="font-bold text-lg mb-4 flex items-center">
                            <i class="fas fa-award text-purple-400 mr-2"></i>
                            Your Achievement Badges
                        </h4>
                        <div class="flex flex-wrap gap-2">
                            <div class="bg-gradient-to-r from-green-400/20 to-green-600/20 text-green-400 px-4 py-2 rounded-full text-sm border border-green-400/50 badge-shine font-semibold">
                                <i class="fas fa-bullseye mr-1"></i>
                                Galileo Precision
                            </div>
                            <div class="bg-gradient-to-r from-blue-400/20 to-blue-600/20 text-blue-400 px-4 py-2 rounded-full text-sm border border-blue-400/50 badge-shine font-semibold">
                                <i class="fas fa-check-circle mr-1"></i>
                                EGNOS Verified
                            </div>
                            <div class="bg-gradient-to-r from-orange-400/20 to-orange-600/20 text-orange-400 px-4 py-2 rounded-full text-sm border border-orange-400/50 badge-shine font-semibold">
                                <i class="fas fa-hiking mr-1"></i>
                                100km Explorer
                            </div>
                            <div class="bg-gradient-to-r from-purple-400/20 to-purple-600/20 text-purple-400 px-4 py-2 rounded-full text-sm border border-purple-400/50 badge-shine font-semibold">
                                <i class="fas fa-moon mr-1"></i>
                                Night Navigator
                            </div>
                            <div class="bg-gradient-to-r from-yellow-400/20 to-yellow-600/20 text-yellow-400 px-4 py-2 rounded-full text-sm border border-yellow-400/50 badge-shine font-semibold">
                                <i class="fas fa-leaf mr-1"></i>
                                Eco Champion
                            </div>
                            <div class="bg-gradient-to-r from-red-400/20 to-red-600/20 text-red-400 px-4 py-2 rounded-full text-sm border border-red-400/50 badge-shine font-semibold">
                                <i class="fas fa-mountain mr-1"></i>
                                Peak Conqueror
                            </div>
                        </div>
                        
                        <div class="mt-4 pt-4 border-t border-gray-700">
                            <p class="text-xs text-gray-400 text-center">
                                Earn more badges by completing challenges and maintaining high scores
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 text-center">
                <button @click="currentScreen = 'audit'" class="bg-gradient-to-r from-green-400 to-blue-500 text-black font-semibold px-8 py-4 rounded-xl hover:opacity-90 transition-opacity">
                    Complete Sustainability Audit
                </button>
            </div>
        </div>
    </div>

    <!-- S20-S24. Post-Trip Sustainability Audit -->
    <div x-show="currentScreen === 'audit'" class="min-h-screen bg-black p-4 md:p-6">
        <div class="max-w-4xl mx-auto pt-8">
            <div class="text-center mb-8">
                <h2 class="text-2xl md:text-3xl font-bold mb-4">Sustainability Audit</h2>
                <p class="text-gray-400">Your experience validated against Galileo tracking data</p>
                <div class="mt-4">
                    <div class="w-full bg-gray-800 rounded-full h-2">
                        <div class="bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full transition-all duration-300" :style="'width: ' + ((currentQuestion + 1) / totalQuestions * 100) + '%'"></div>
                    </div>
                    <p class="text-sm text-gray-400 mt-2" x-text="'Question ' + (currentQuestion + 1) + ' of ' + totalQuestions"></p>
                </div>
            </div>

            <!-- Question Card with 3D Swipe Effect -->
            <div class="bg-gray-900 rounded-2xl p-6 md:p-8 mb-8 border-2 border-green-400 glow-green card-swipe-enter" 
                 style="perspective: 1000px; transform-style: preserve-3d;">
                
                <!-- Category Badge -->
                <div class="flex justify-center mb-4">
                    <div class="bg-gradient-to-r from-green-400/20 to-blue-400/20 backdrop-blur-sm px-4 py-2 rounded-full border border-green-400/50">
                        <p class="text-xs font-semibold text-green-400" x-text="auditQuestions[currentQuestion].category"></p>
                    </div>
                </div>
                
                <div class="text-center mb-8">
                    <div class="w-20 h-20 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-6 neon-halo">
                        <i x-bind:class="{
                            'fa-leaf': auditQuestions[currentQuestion].category === 'Environmental Impact',
                            'fa-users': auditQuestions[currentQuestion].category === 'Social & Cultural Responsibility',
                            'fa-cogs': auditQuestions[currentQuestion].category === 'Operational & Resource Management',
                            'fa-shield-alt': auditQuestions[currentQuestion].category === 'Safety & Risk Management'
                        }" class="fas text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl md:text-2xl font-bold mb-2 text-white leading-relaxed" x-text="auditQuestions[currentQuestion].question"></h3>
                </div>

                <!-- Answer Options with Enhanced Styling -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <button @click="selectAnswer(0)" 
                            :class="selectedAnswer === 0 ? 'bg-red-500 border-red-400 scale-105 glow-red' : 'bg-gray-800 border-gray-600 hover:border-red-400 hover:scale-102'" 
                            class="border-3 rounded-2xl p-6 text-center transition-all duration-300 transform card-hover touch-feedback">
                        <div class="text-4xl mb-3 font-bold">0</div>
                        <p class="text-sm font-medium">Never/Not at All</p>
                        <div class="mt-2 text-xs text-gray-400">‚ùå</div>
                    </button>
                    <button @click="selectAnswer(1)" 
                            :class="selectedAnswer === 1 ? 'bg-orange-500 border-orange-400 scale-105 glow-orange' : 'bg-gray-800 border-gray-600 hover:border-orange-400 hover:scale-102'" 
                            class="border-3 rounded-2xl p-6 text-center transition-all duration-300 transform card-hover touch-feedback">
                        <div class="text-4xl mb-3 font-bold">1</div>
                        <p class="text-sm font-medium">Sometimes/Average</p>
                        <div class="mt-2 text-xs text-gray-400">‚ö†Ô∏è</div>
                    </button>
                    <button @click="selectAnswer(2)" 
                            :class="selectedAnswer === 2 ? 'bg-green-500 border-green-400 scale-105 glow-green' : 'bg-gray-800 border-gray-600 hover:border-green-400 hover:scale-102'" 
                            class="border-3 rounded-2xl p-6 text-center transition-all duration-300 transform card-hover touch-feedback">
                        <div class="text-4xl mb-3 font-bold">2</div>
                        <p class="text-sm font-medium">Always/Completely</p>
                        <div class="mt-2 text-xs text-gray-400">‚úÖ</div>
                    </button>
                </div>

                <!-- Validation Feedback with Enhanced Styling -->
                <div x-show="showValidation"
                     x-transition:enter="transition ease-out duration-300"
                     x-transition:enter-start="opacity-0 transform scale-95"
                     x-transition:enter-end="opacity-100 transform scale-100"
                     class="bg-gradient-to-r from-blue-900/50 to-blue-800/50 backdrop-blur-sm border-2 border-blue-400 rounded-xl p-4 mb-6 glow-blue">
                    <div class="flex items-start space-x-3">
                        <div class="w-10 h-10 bg-blue-400 rounded-full flex items-center justify-center flex-shrink-0 pulse-green">
                            <i class="fas fa-satellite text-white"></i>
                        </div>
                        <div>
                            <p class="text-sm font-semibold text-blue-200 mb-1">Galileo Tracking Data</p>
                            <p class="text-sm text-blue-300">System indicates a 2% deviation from the planned route. Your answer has been cross-validated.</p>
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="flex justify-between gap-4">
                    <button @click="previousQuestion()" 
                            :disabled="currentQuestion === 0" 
                            class="bg-gray-800 border-2 border-gray-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-gray-700 hover:border-gray-500 transition-all disabled:opacity-30 disabled:cursor-not-allowed touch-feedback">
                        <i class="fas fa-arrow-left mr-2"></i>
                        Previous
                    </button>
                    <button @click="nextQuestion()" 
                            :disabled="selectedAnswer === null" 
                            class="bg-gradient-to-r from-green-400 to-blue-500 text-black px-8 py-3 rounded-xl font-bold hover:opacity-90 transition-all disabled:opacity-30 disabled:cursor-not-allowed touch-feedback flex-1 md:flex-none shadow-lg">
                        <span x-text="currentQuestion === totalQuestions - 1 ? 'Complete Audit' : 'Next Question'"></span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
                
                <!-- Swipe Hint for Mobile -->
                <div class="mt-4 text-center md:hidden">
                    <p class="text-xs text-gray-500">
                        <i class="fas fa-hand-pointer mr-1"></i>
                        Swipe gesture supported
                    </p>
                </div>
            </div>

            <!-- Final Score Display (Enhanced) -->
            <div x-show="auditComplete"
                 x-transition:enter="transition ease-out duration-500"
                 x-transition:enter-start="opacity-0 scale-90"
                 x-transition:enter-end="opacity-100 scale-100"
                 class="bg-gradient-to-br from-gray-900 to-black rounded-3xl p-8 text-center border-2 border-green-400 glow-green">
                
                <!-- Celebration Animation -->
                <div class="mb-6">
                    <div class="text-6xl mb-4">üéâ</div>
                    <h2 class="text-3xl font-black text-white mb-2">Audit Complete!</h2>
                </div>
                
                <!-- Score Display -->
                <div class="relative w-40 h-40 mx-auto mb-8">
                    <canvas id="finalScoreChart" width="160" height="160"></canvas>
                    <div class="absolute inset-0 flex flex-col items-center justify-center">
                        <span class="text-5xl font-black neon-green">87</span>
                        <span class="text-sm text-gray-400">out of 100</span>
                    </div>
                    <div class="absolute inset-0 rounded-full border-4 border-green-400/20 animate-ping" style="animation-duration: 3s;"></div>
                </div>
                
                <h3 class="text-3xl font-bold neon-green mb-3">Sustainability Score: 87%</h3>
                <div class="inline-block bg-gradient-to-r from-green-400/20 to-blue-400/20 backdrop-blur-sm px-6 py-3 rounded-full border border-green-400/50 mb-6">
                    <p class="text-lg text-white font-semibold">
                        üåü Excellent! Top 15% of Explorers
                    </p>
                </div>
                
                <!-- Score Breakdown -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <div class="bg-gray-800/50 rounded-xl p-4 border border-green-400/30">
                        <div class="text-3xl font-bold neon-green mb-1">95%</div>
                        <div class="text-xs text-gray-400">Environmental</div>
                    </div>
                    <div class="bg-gray-800/50 rounded-xl p-4 border border-blue-400/30">
                        <div class="text-3xl font-bold text-blue-400 mb-1">85%</div>
                        <div class="text-xs text-gray-400">Social</div>
                    </div>
                    <div class="bg-gray-800/50 rounded-xl p-4 border border-orange-400/30">
                        <div class="text-3xl font-bold text-orange-400 mb-1">82%</div>
                        <div class="text-xs text-gray-400">Operations</div>
                    </div>
                    <div class="bg-gray-800/50 rounded-xl p-4 border border-yellow-400/30">
                        <div class="text-3xl font-bold text-yellow-400 mb-1">88%</div>
                        <div class="text-xs text-gray-400">Safety</div>
                    </div>
                </div>
                
                <!-- Recommendations -->
                <div class="bg-gray-800/70 backdrop-blur-sm rounded-2xl p-6 mb-6 text-left border border-gray-700">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-lightbulb text-yellow-400 text-2xl mr-3"></i>
                        <h4 class="font-bold text-lg text-white">Personalized Recommendations</h4>
                    </div>
                    <ul class="space-y-3 text-sm text-gray-300">
                        <li class="flex items-start">
                            <i class="fas fa-fire text-orange-400 mr-3 mt-1"></i>
                            <span><strong>Fire Safety:</strong> Consider using designated fire areas only (Question 3 - verified against Copernicus LST data)</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-route text-blue-400 mr-3 mt-1"></i>
                            <span><strong>Route Adherence:</strong> Improve path following for better environmental protection</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-400 mr-3 mt-1"></i>
                            <span><strong>Excellent Work:</strong> Continue your outstanding waste management practices</span>
                        </li>
                    </ul>
                </div>

                <!-- Feedback Section -->
                <div class="mb-6">
                    <label class="block text-left font-semibold mb-3 text-white">
                        <i class="fas fa-comment-dots mr-2 text-blue-400"></i>
                        How accurate were the Copernicus alerts?
                    </label>
                    <textarea placeholder="Share your feedback about alert accuracy, timeliness, and overall experience..." 
                              class="w-full bg-gray-800 border-2 border-gray-600 rounded-xl px-4 py-3 text-white placeholder-gray-400 focus:border-green-400 focus:outline-none focus:ring-2 focus:ring-green-400/50 transition-all" 
                              rows="4"></textarea>
                    <p class="text-xs text-gray-500 mt-2 text-left">Your feedback helps improve our EU Space data integration</p>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-col md:flex-row gap-4">
                    <button @click="currentScreen = 'leagues'" 
                            class="flex-1 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold px-6 py-4 rounded-xl hover:opacity-90 transition-all shadow-lg touch-feedback">
                        <i class="fas fa-trophy mr-2"></i>
                        View Leaderboard
                    </button>
                    <button @click="currentScreen = 'splash'" 
                            class="flex-1 bg-gradient-to-r from-green-400 to-blue-500 text-black font-bold px-6 py-4 rounded-xl hover:opacity-90 transition-all shadow-lg touch-feedback">
                        <i class="fas fa-home mr-2"></i>
                        Return to Home
                    </button>
                </div>
                
                <!-- Data Attribution -->
                <div class="mt-6 pt-6 border-t border-gray-700">
                    <p class="text-xs text-gray-500 flex items-center justify-center">
                        <i class="fas fa-satellite mr-2"></i>
                        Validated by Galileo tracking & Copernicus environmental data
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function ecoRoverApp() {
            return {
                currentScreen: 'splash',
                loadingProgress: 0,
                loadingText: 'Initializing Galileo GNSS...',
                showCriticalAlert: false,
                showSustainabilityAlert: false,
                showSOSModal: false,
                sosHoldProgress: 0,
                sosHoldTimer: null,
                currentQuestion: 0,
                totalQuestions: 20,
                selectedAnswer: null,
                showValidation: false,
                auditComplete: false,
                
                // Trip planning selections
                selectedActivities: [],
                selectedTerrains: [],
                selectedRoute: null,
                sustainabilityLevel: 75,
                primaryRole: null,
                
                // Companion counters
                adultsCount: 2,
                childrenCount: 0,
                petsCount: 1,
                
                // Safety alert toggles
                alertFire: true,
                alertFlood: true,
                alertLandslide: false,
                alertAvalanche: true,
                alertLightning: true,
                alertGeological: false,
                
                // Accessibility surface type
                selectedSurface: null,
                
                // Map waypoints
                waypoints: [],
                selectedWaypoint: null,
                
                // Location permission toggles
                galileoEnabled: true,
                egnosEnabled: true,
                backgroundLocationEnabled: true,
                
                // LULC Layer visibility
                showLULCLayer: false,
                
                // Route consequences visibility
                showRouteConsequences: false,
                routeConsequences: null,
                
                // Emergency settings panel
                showEmergencySettings: false,
                
                // EcoRover character animation
                showEcoRoverCharacter: false,
                
                // Toggle activity
                toggleActivity(activity) {
                    const index = this.selectedActivities.indexOf(activity);
                    if (index > -1) {
                        this.selectedActivities.splice(index, 1);
                    } else {
                        this.selectedActivities.push(activity);
                    }
                    console.log('Selected activities:', this.selectedActivities);
                },
                
                // Toggle terrain
                toggleTerrain(terrain) {
                    const index = this.selectedTerrains.indexOf(terrain);
                    if (index > -1) {
                        this.selectedTerrains.splice(index, 1);
                    } else {
                        this.selectedTerrains.push(terrain);
                    }
                    console.log('Selected terrains:', this.selectedTerrains);
                },
                
                // Companion counters
                incrementAdults() {
                    if (this.adultsCount < 10) {
                        this.adultsCount++;
                        console.log('Adults:', this.adultsCount);
                    }
                },
                decrementAdults() {
                    if (this.adultsCount > 0) {
                        this.adultsCount--;
                        console.log('Adults:', this.adultsCount);
                    }
                },
                incrementChildren() {
                    if (this.childrenCount < 10) {
                        this.childrenCount++;
                        console.log('Children:', this.childrenCount);
                    }
                },
                decrementChildren() {
                    if (this.childrenCount > 0) {
                        this.childrenCount--;
                        console.log('Children:', this.childrenCount);
                    }
                },
                incrementPets() {
                    if (this.petsCount < 5) {
                        this.petsCount++;
                        console.log('Pets:', this.petsCount);
                    }
                },
                decrementPets() {
                    if (this.petsCount > 0) {
                        this.petsCount--;
                        console.log('Pets:', this.petsCount);
                    }
                },
                
                // Safety alert toggles
                toggleAlert(alertType) {
                    this[alertType] = !this[alertType];
                    console.log(alertType + ':', this[alertType]);
                },
                
                // Surface type selection
                selectSurface(surface) {
                    this.selectedSurface = surface;
                    console.log('Selected surface:', surface);
                },
                
                // Location permission toggles
                toggleGalileo() {
                    this.galileoEnabled = !this.galileoEnabled;
                    console.log('Galileo GNSS:', this.galileoEnabled);
                },
                toggleEgnos() {
                    this.egnosEnabled = !this.egnosEnabled;
                    console.log('EGNOS Corrections:', this.egnosEnabled);
                },
                toggleBackgroundLocation() {
                    this.backgroundLocationEnabled = !this.backgroundLocationEnabled;
                    console.log('Background Location:', this.backgroundLocationEnabled);
                },
                
                // Select route
                selectRoute(routeName) {
                    this.selectedRoute = routeName;
                    console.log('Selected route:', routeName);
                    
                    // Show consequences after selection
                    this.showRouteConsequences = true;
                    this.routeConsequences = this.getRouteConsequences(routeName);
                },
                
                // Get route consequences
                getRouteConsequences(routeName) {
                    const consequences = {
                        green: {
                            name: 'Green Path',
                            color: 'green',
                            pros: [
                                'Lowest environmental impact (95/100 sustainability)',
                                'Protected vegetation zones avoided',
                                'Zero trace camping areas available',
                                'Wildlife-friendly timing'
                            ],
                            cons: [
                                'Longer duration (+30 minutes)',
                                'Higher elevation gain (+140m)',
                                'Some steep sections (max 18% slope)',
                                'Limited mobile coverage in forest areas'
                            ],
                            risks: 'Low risk - Well-marked paths, stable terrain',
                            alerts: []
                        },
                        safe: {
                            name: 'Safe Route',
                            color: 'yellow',
                            pros: [
                                'Highest safety rating (98/100)',
                                'Gentle slopes (max 12%)',
                                'Full mobile coverage',
                                'Emergency shelters every 2km'
                            ],
                            cons: [
                                'Passes through moderate impact zones',
                                'More crowded trails',
                                'Limited scenic viewpoints',
                                'Higher carbon footprint (+15%)'
                            ],
                            risks: 'Very Low risk - Maintained paths, regular patrols',
                            alerts: []
                        },
                        fastest: {
                            name: 'Fastest Route',
                            color: 'blue',
                            pros: [
                                'Shortest time (2h 50m)',
                                'Direct path to destination',
                                'Lower elevation gain',
                                'Good for experienced hikers'
                            ],
                            cons: [
                                'Passes through fire risk zone (moderate alert)',
                                'Crosses sensitive vegetation area',
                                'Steep descent sections (20% max)',
                                'Limited water sources'
                            ],
                            risks: 'Moderate risk - Exposed areas, weather-dependent',
                            alerts: ['‚ö†Ô∏è Fire risk zone (km 3-5)', '‚ö†Ô∏è Steep terrain (km 6-7)']
                        },
                        balanced: {
                            name: 'Balanced Route',
                            color: 'orange',
                            pros: [
                                'Optimized trade-offs',
                                'Moderate sustainability (85/100)',
                                'Good safety rating (88/100)',
                                'Scenic viewpoints included'
                            ],
                            cons: [
                                'Some rocky sections',
                                'Moderate elevation changes',
                                'Variable trail conditions',
                                'Average environmental impact'
                            ],
                            risks: 'Low-Moderate risk - Mixed terrain, seasonal factors',
                            alerts: ['‚ö†Ô∏è Rocky section (km 4-5)']
                        }
                    };
                    return consequences[routeName];
                },
                auditQuestions: [
                    { question: "Did you respect designated routes and avoid unauthorized areas?", category: "Environmental Impact" },
                    { question: "Did you collect all your trash and leave nothing but footprints?", category: "Environmental Impact" },
                    { question: "Did you refrain from lighting fires in prohibited or dangerous locations?", category: "Environmental Impact" },
                    { question: "Did you refrain from picking plants, mushrooms, or natural specimens?", category: "Environmental Impact" },
                    { question: "Did you use natural water resources sustainably and prevent water contamination?", category: "Environmental Impact" },
                    { question: "Did you respect wildlife and animal signs, and avoid disturbing them?", category: "Environmental Impact" },
                    { question: "Did you prevent soil and vegetation damage in camps and hiking trails?", category: "Environmental Impact" },
                    { question: "Did you respect local laws, protected areas, and regional restrictions?", category: "Social & Cultural Responsibility" },
                    { question: "Did you interact respectfully with and support the local community or guides?", category: "Social & Cultural Responsibility" },
                    { question: "Was your behavior compatible and friendly with other nature tourists and participants?", category: "Social & Cultural Responsibility" },
                    { question: "Did you try to learn and respect the local culture and customs of the area?", category: "Social & Cultural Responsibility" },
                    { question: "Did you use your equipment and resources efficiently and without waste?", category: "Operational & Resource Management" },
                    { question: "Did your chosen route and camp have the least negative impact on the environment?", category: "Operational & Resource Management" },
                    { question: "Was energy and fuel used efficiently?", category: "Operational & Resource Management" },
                    { question: "Was planning for water, food, and equipment consumption done appropriately?", category: "Operational & Resource Management" },
                    { question: "Did you have sufficient information about natural hazards before and during the trip?", category: "Safety & Risk Management" },
                    { question: "Did you carry and use appropriate safety and first aid equipment?", category: "Safety & Risk Management" },
                    { question: "Were all activities managed in a way that did not put excessive pressure on the environment?", category: "Safety & Risk Management" },
                    { question: "Did participants receive necessary training for emergency situations and wilderness behavior?", category: "Safety & Risk Management" },
                    { question: "Were routes and activities chosen to minimize the risk of human and natural incidents?", category: "Safety & Risk Management" }
                ],

                init() {
                    console.log('EcoRover initialized');
                    
                    // Auto-progress splash screen
                    setTimeout(() => {
                        this.currentScreen = 'auth';
                    }, 3500);

                    // Initialize charts when results screen is shown
                    this.$watch('currentScreen', (value, oldValue) => {
                        console.log('Screen changed from', oldValue, 'to', value);
                        
                        if (value === 'loading') {
                            this.simulateLoading();
                        }
                        
                        if (value === 'results') {
                            setTimeout(() => {
                                this.initializeCharts();
                            }, 100);
                        }
                        
                        if (value === 'navigation') {
                            // Show critical alert after 5 seconds
                            setTimeout(() => {
                                if (this.currentScreen === 'navigation') {
                                    this.showCriticalAlert = true;
                                    this.triggerHaptic();
                                    this.playAlertSound();
                                }
                            }, 5000);
                            
                            // Show sustainability alert after 12 seconds
                            setTimeout(() => {
                                if (this.currentScreen === 'navigation') {
                                    this.showSustainabilityAlert = true;
                                }
                            }, 12000);
                        }
                        
                        if (value === 'audit') {
                            if (this.auditComplete) {
                                setTimeout(() => {
                                    this.initializeFinalScoreChart();
                                }, 100);
                            }
                        }
                        
                        // Scroll to top on screen change
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    });
                    
                    // Add touch swipe support for audit cards
                    this.initSwipeGestures();
                },
                
                // Haptic Feedback Simulation
                triggerHaptic() {
                    if ('vibrate' in navigator) {
                        // Pattern: vibrate for 200ms, pause 100ms, vibrate 200ms
                        navigator.vibrate([200, 100, 200]);
                    }
                },
                
                // Play Alert Sound
                playAlertSound() {
                    // Web Audio API alert tone (optional)
                    try {
                        if (typeof AudioContext === 'undefined' && typeof webkitAudioContext === 'undefined') {
                            return;
                        }
                        
                        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);
                        
                        oscillator.frequency.value = 800;
                        oscillator.type = 'sine';
                        
                        gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                        
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.5);
                    } catch (e) {
                        console.log('Audio not supported:', e);
                    }
                },
                
                // Swipe Gesture Support
                initSwipeGestures() {
                    let touchStartX = 0;
                    let touchEndX = 0;
                    
                    const handleTouchStart = (e) => {
                        touchStartX = e.changedTouches[0].screenX;
                    };
                    
                    const handleTouchEnd = (e) => {
                        touchEndX = e.changedTouches[0].screenX;
                        
                        if (this.currentScreen !== 'audit' || this.auditComplete) return;
                        
                        const swipeThreshold = 50;
                        const diff = touchStartX - touchEndX;
                        
                        if (Math.abs(diff) > swipeThreshold) {
                            if (diff > 0) {
                                // Swipe left - next question
                                if (this.selectedAnswer !== null && this.currentQuestion < this.totalQuestions - 1) {
                                    this.nextQuestion();
                                }
                            } else {
                                // Swipe right - previous question
                                if (this.currentQuestion > 0) {
                                    this.previousQuestion();
                                }
                            }
                        }
                    };
                    
                    document.addEventListener('touchstart', handleTouchStart);
                    document.addEventListener('touchend', handleTouchEnd);
                },

                simulateLoading() {
                    if (this.currentScreen !== 'loading') return;
                    
                    const loadingSteps = [
                        'Initializing Galileo GNSS...',
                        'Calculating EGNOS navigation integrity...',
                        'Retrieving Copernicus Land Cover Data...',
                        'Running Risk Model Simulation...',
                        'Analyzing route sustainability...',
                        'Finalizing recommendations...'
                    ];

                    let step = 0;
                    this.loadingProgress = 0;
                    this.loadingText = loadingSteps[0];
                    
                    const interval = setInterval(() => {
                        this.loadingProgress += 16.67;
                        if (step < loadingSteps.length - 1) {
                            step++;
                            this.loadingText = loadingSteps[step];
                        }

                        if (this.loadingProgress >= 100) {
                            clearInterval(interval);
                            setTimeout(() => {
                                if (this.currentScreen === 'loading') {
                                    this.currentScreen = 'results';
                                }
                            }, 500);
                        }
                    }, 1000);
                },

                selectAnswer(value) {
                    this.selectedAnswer = value;
                    this.showValidation = Math.random() > 0.7; // Show validation 30% of the time
                    this.triggerHaptic();
                },
                
                // SOS Hold to Activate
                startSOSHold() {
                    this.sosHoldProgress = 0;
                    const startTime = Date.now();
                    const holdDuration = 3000; // 3 seconds
                    
                    this.sosHoldTimer = setInterval(() => {
                        const elapsed = Date.now() - startTime;
                        this.sosHoldProgress = (elapsed / holdDuration) * 100;
                        
                        if (this.sosHoldProgress >= 100) {
                            this.activateSOS();
                        }
                    }, 50);
                    
                    // Continuous vibration
                    if ('vibrate' in navigator) {
                        navigator.vibrate(3000);
                    }
                },
                
                cancelSOSHold() {
                    if (this.sosHoldTimer) {
                        clearInterval(this.sosHoldTimer);
                        this.sosHoldTimer = null;
                    }
                    this.sosHoldProgress = 0;
                    
                    // Stop vibration
                    if ('vibrate' in navigator) {
                        navigator.vibrate(0);
                    }
                },
                
                activateSOS() {
                    this.cancelSOSHold();
                    
                    // Trigger strong haptic feedback
                    if ('vibrate' in navigator) {
                        navigator.vibrate([500, 200, 500, 200, 500]);
                    }
                    
                    alert('üÜò SOS ACTIVATED!\n\nEmergency signal sent via Galileo SAR.\nYour precise coordinates have been transmitted to emergency services.\n\nBackup transmission via IRIS2/GOVSATCOM confirmed.');
                    
                    this.showSOSModal = false;
                    this.sosHoldProgress = 0;
                },

                nextQuestion() {
                    if (this.selectedAnswer === null) return;
                    
                    if (this.currentQuestion < this.totalQuestions - 1) {
                        this.currentQuestion++;
                        this.selectedAnswer = null;
                        this.showValidation = false;
                    } else {
                        // Last question - complete audit
                        this.auditComplete = true;
                        setTimeout(() => {
                            this.initializeFinalScoreChart();
                        }, 200);
                    }
                },

                previousQuestion() {
                    if (this.currentQuestion > 0) {
                        this.currentQuestion--;
                        this.selectedAnswer = null;
                        this.showValidation = false;
                    }
                },

                initializeCharts() {
                    console.log('Initializing charts...');
                    
                    try {
                        // Sustainability Chart
                        const sustainabilityCtx = document.getElementById('sustainabilityChart');
                        if (sustainabilityCtx && typeof Chart !== 'undefined') {
                            new Chart(sustainabilityCtx, {
                                type: 'doughnut',
                                data: {
                                    datasets: [{
                                        data: [87, 13],
                                        backgroundColor: ['#00FF00', '#374151'],
                                        borderWidth: 0
                                    }]
                                },
                                options: {
                                    responsive: false,
                                    maintainAspectRatio: false,
                                    cutout: '70%',
                                    plugins: {
                                        legend: { display: false }
                                    }
                                }
                            });
                        }

                        // Safety Chart
                        const safetyCtx = document.getElementById('safetyChart');
                        if (safetyCtx && typeof Chart !== 'undefined') {
                            new Chart(safetyCtx, {
                                type: 'doughnut',
                                data: {
                                    datasets: [{
                                        data: [92, 8],
                                        backgroundColor: ['#FFA500', '#374151'],
                                        borderWidth: 0
                                    }]
                                },
                                options: {
                                    responsive: false,
                                    maintainAspectRatio: false,
                                    cutout: '70%',
                                    plugins: {
                                        legend: { display: false }
                                    }
                                }
                            });
                        }

                        // Accessibility Chart
                        const accessibilityCtx = document.getElementById('accessibilityChart');
                        if (accessibilityCtx && typeof Chart !== 'undefined') {
                            new Chart(accessibilityCtx, {
                                type: 'doughnut',
                                data: {
                                    datasets: [{
                                        data: [78, 22],
                                        backgroundColor: ['#007FFF', '#374151'],
                                        borderWidth: 0
                                    }]
                                },
                                options: {
                                    responsive: false,
                                    maintainAspectRatio: false,
                                    cutout: '70%',
                                    plugins: {
                                        legend: { display: false }
                                    }
                                }
                            });
                        }
                        console.log('Charts initialized successfully');
                    } catch (error) {
                        console.error('Error initializing charts:', error);
                    }
                },

                initializeFinalScoreChart() {
                    console.log('Initializing final score chart...');
                    
                    try {
                        const finalScoreCtx = document.getElementById('finalScoreChart');
                        if (finalScoreCtx && typeof Chart !== 'undefined') {
                            new Chart(finalScoreCtx, {
                                type: 'doughnut',
                                data: {
                                    datasets: [{
                                        data: [87, 13],
                                        backgroundColor: ['#00FF00', '#374151'],
                                        borderWidth: 0
                                    }]
                                },
                                options: {
                                    responsive: false,
                                    maintainAspectRatio: false,
                                    cutout: '70%',
                                    plugins: {
                                        legend: { display: false }
                                    }
                                }
                            });
                            console.log('Final score chart initialized');
                        }
                    } catch (error) {
                        console.error('Error initializing final score chart:', error);
                    }
                }
            }
        }
    </script>
</body>
</html>
